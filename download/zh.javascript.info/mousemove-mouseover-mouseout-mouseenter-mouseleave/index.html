<!DOCTYPE html><html lang="zh" data-theme-enabled="1"><head><script>window.currentUser = null;</script><script>window.rateUsdToNative = 6.3589;</script><title itemprop="name">移动鼠标：mouseover/out，mouseenter/leave</title><link href="../pack/styles.e61986aaa5d558f47fd2.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><!-- chrome autotranslate is enabled only for "en" main version--><meta name="google" content="notranslate"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="//fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="../img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="https://zh.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="../img/favicon/favicon.png"><meta itemprop="image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="移动鼠标：mouseover/out，mouseenter/leave"><meta property="og:image" content="../img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="移动鼠标：mouseover/out，mouseenter/leave"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="/mouse-events-basics"><link rel="next" href="/mouse-drag-and-drop"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 65598091;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="https://www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="//mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";</script><script src="../pack/init.f551d10c469632252be6.js"></script><script src="../pack/head.7c4dbce7f0d4e5d1865e.js" defer></script><meta property="og:title" content="移动鼠标：mouseover/out，mouseenter/leave"><meta property="og:type" content="article"><script src="../pack/tutorial.0085805d53a665cf3a7e.js" defer></script><script src="../pack/footer.b5edaae5b6e4efe79394.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if IE]><div style="color:red;text-align:center">很抱歉，我们不支持 Internet Explorer 等浏览器，请使用一个更新版本的浏览器。</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><script>window.langs = [{"code":"ar","name":"Arabic"},{"code":"az","name":"Azerbaijani"},{"code":"bg","name":"Bulgarian"},{"code":"bn","name":"Bengali"},{"code":"bs","name":"Bosnian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fa","name":"Persian (Farsi)"},{"code":"fi","name":"Finnish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hi","name":"Hindi"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"hy","name":"Armenian"},{"code":"id","name":"Indonesian"},{"code":"it","name":"Italian"},{"code":"ja","name":"Japanese"},{"code":"ka","name":"Georgian"},{"code":"kk","name":"Kazakh"},{"code":"km","name":"Central Khmer"},{"code":"ko","name":"Korean"},{"code":"lt","name":"Lithuanian"},{"code":"me","name":"Montenegrin"},{"code":"ml","name":"Malayalam"},{"code":"my","name":"Burmese"},{"code":"nl","name":"Dutch"},{"code":"no","name":"Norvegian"},{"code":"pa","name":"Punjabi"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"ru","name":"Russian"},{"code":"si","name":"Sinhala"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovenian"},{"code":"sq","name":"Albanian"},{"code":"sr","name":"Serbian"},{"code":"ta","name":"Tamil"},{"code":"te","name":"Telugu"},{"code":"test","name":"Test"},{"code":"th","name":"Thai"},{"code":"tk","name":"Turkmen"},{"code":"tr","name":"Turkish"},{"code":"uk","name":"Ukrainian"},{"code":"ur","name":"Urdu"},{"code":"uz","name":"Uzbek"},{"code":"v2","name":"v2"},{"code":"vi","name":"Vietnamese"},{"code":"zh-hant","name":"Chinese Traditional"},{"code":"zh","name":"Chinese"}];</script><script>window.lang = "zh";</script><script>{let t=navigator.languages||[];t=t.map(t=>t.toLowerCase());let o,i,n=[];for(let o of window.langs)for(let i of t)if(i===o.code||i.startsWith(o.code+"-")){n.push(o);break}if(!o&&"ru"!=lang&&"en"!=lang){n.find(t=>"en"==t.code)&&(o=`\n            According to your browser headers, you know English. Please help to <a href="https://github.com/javascript-tutorial/${lang}.javascript.info#readme">translate the tutorial</a>.\n            Thank you!\n          `,i="notify-translate-tutorial-local")}if(o){let t=`<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${i}">\n          <div class="notification__content">${o}</div>\n          <button class="notification__close" title="Close"></button>\n        </div>`;document.write(t),showTopNotification()}}</script><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>ZH</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__container"><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ar.javascript.info/"><span class="supported-langs__brief">AR</span><span class="supported-langs__title">عربي</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://es.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave"><span class="supported-langs__brief">ES</span><span class="supported-langs__title">Español</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fr.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave"><span class="supported-langs__brief">FR</span><span class="supported-langs__title">Français</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://id.javascript.info/"><span class="supported-langs__brief">ID</span><span class="supported-langs__title">Indonesia</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://it.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave"><span class="supported-langs__brief">IT</span><span class="supported-langs__title">Italiano</span></a></li></ul><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ja.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">日本語</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ko.javascript.info/"><span class="supported-langs__brief">KO</span><span class="supported-langs__title">한국어</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://learn.javascript.ru/mousemove-mouseover-mouseout-mouseenter-mouseleave"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Русский</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://tr.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave"><span class="supported-langs__brief">TR</span><span class="supported-langs__title">Türkçe</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://uk.javascript.info/"><span class="supported-langs__brief">UK</span><span class="supported-langs__title">Українська</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="index.html"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">简体中文</span></a></li></ul></div><div class="supported-langs__text">我们希望将这个开源项目提供给全世界的人。请帮助我们将教程的内容 <a href="https://github.com/javascript-tutorial/translate" rel="noopener noreferrer" target="_blank">翻译为你所掌握的语言</a> 对应的版本。</div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="../index.html"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="../img/sitetoolbar__logo_en.svg" width="200" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_normal sitetoolbar__logo_dark" src="../img/sitetoolbar__logo_en-white.svg" width="200" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_small" src="../img/sitetoolbar__logo_small_en.svg" width="70" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_small sitetoolbar__logo_dark" src="../img/sitetoolbar__logo_small_en-white.svg" width="70" alt role="presentation"><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="../ebook/index.html"><span class="buy-book-button__extra-text">购买</span>EPUB/PDF</a></div><div class="sitetoolbar__theme-switcher"><div class="theme-changer"><label class="theme-changer__label" for="theme-changer-input" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span></label></div></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><button class="sitetoolbar__search-toggle" type="button"></button><form class="sitetoolbar__search" method="GET" action="/search"><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="在 Javascript.info 网站中搜索" required="required" type="text"></div><button class="sitetoolbar__find" type="submit">搜索</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="在教程中搜索" required="required"><button class="tablet-menu-search__button" type="submit" name="type" value="articles">搜索</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map"><span class="map__text">教程路线图</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="theme-changer theme-changer_tablet-menu theme-changer_has-label"><label class="theme-changer__label" for="theme-changer-input-tablet" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input-tablet" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span><span class="theme-changer__label-text theme-changer__label-text_light-theme">Light theme</span><span class="theme-changer__label-text theme-changer__label-text_dark-theme">Dark theme</span></label></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">分享</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fmousemove-mouseover-mouseout-mouseenter-mouseleave" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fmousemove-mouseover-mouseout-mouseenter-mouseleave" rel="nofollow"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://ar.javascript.info/">عربي</option><option value="https://javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave">English</option><option value="https://es.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave">Español</option><option value="https://fr.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave">Français</option><option value="https://id.javascript.info/">Indonesia</option><option value="https://it.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave">Italiano</option><option value="https://ja.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave">日本語</option><option value="https://ko.javascript.info/">한국어</option><option value="https://learn.javascript.ru/mousemove-mouseover-mouseout-mouseenter-mouseleave">Русский</option><option value="https://tr.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave">Türkçe</option><option value="https://uk.javascript.info/">Українська</option><option value="https://zh.javascript.info/mousemove-mouseover-mouseout-mouseenter-mouseleave" selected>简体中文</option></select></div></div></div><progress class="tutorial-progress" data-sticky value="18" max="32" data-tooltip="第 18/32 节"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");let e=document.querySelector(".page-wrapper");e&&e.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")});</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><div class="main__header-group"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home"><a class="breadcrumbs__link" href="../index.html"><span class="breadcrumbs__hidden-text">教程</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1"><a class="breadcrumbs__link" href="../ui/index.html"><span>浏览器：文档，事件，接口</span></a></li><li class="breadcrumbs__item" id="breadcrumb-2"><a class="breadcrumbs__link" href="../event-details/index.html"><span>UI 事件</span></a></li><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"教程","item":"https://zh.javascript.info/"},{"@type":"ListItem","position":2,"name":"浏览器：文档，事件，接口","item":"https://zh.javascript.info/ui"},{"@type":"ListItem","position":3,"name":"UI 事件","item":"https://zh.javascript.info/event-details"}]}</script></ol><div class="updated-at" data-tooltip="最后修改在 15日 十二月 2021"><div class="updated-at__content">15日 十二月 2021</div></div></div><h1 class="main__header-title">移动鼠标：mouseover/out，mouseenter/leave</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="移动鼠标：mouseover/out，mouseenter/leave"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>我们将深入研究鼠标在元素之间移动时发生的事件。</p>
<h2><a class="main__anchor" name="shi-jian-mouseovermouseoutrelatedtarget" href="#shi-jian-mouseovermouseoutrelatedtarget">事件 mouseover/mouseout，relatedTarget</a></h2><p>当鼠标指针移到某个元素上时，<code>mouseover</code> 事件就会发生，而当鼠标离开该元素时，<code>mouseout</code> 事件就会发生。</p>
<figure><div class="image" style="width:278px">
      <div class="image__ratio" style="padding-top:33.093525179856115%"></div>
      <object type="image/svg+xml" data="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-mouseout.svg" width="278" height="92" class="image__image" data-use-theme>
        <img src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-mouseout.svg" alt width="278" height="92">
      </object>
      </div></figure><p>这些事件很特别，因为它们具有 <code>relatedTarget</code> 属性。此属性是对 <code>target</code> 的补充。当鼠标从一个元素离开并去往另一个元素时，其中一个元素就变成了 <code>target</code>，另一个就变成了 <code>relatedTarget</code>。</p>
<p>对于 <code>mouseover</code>：</p>
<ul>
<li><code>event.target</code> —— 是鼠标移过的那个元素。</li>
<li><code>event.relatedTarget</code> —— 是鼠标来自的那个元素（<code>relatedTarget</code> → <code>target</code>）。</li>
</ul>
<p><code>mouseout</code> 则与之相反：</p>
<ul>
<li><code>event.target</code> —— 是鼠标离开的元素。</li>
<li><code>event.relatedTarget</code> —— 是鼠标移动到的，当前指针位置下的元素（<code>target</code> → <code>relatedTarget</code>）。</li>
</ul>
<p>在下面这个示例中，每张脸及其功能都是单独的元素。当你移动鼠标时，你可以在文本区域中看到鼠标事件。</p>
<p>每个事件都具有关于 <code>target</code> 和 <code>relatedTarget</code> 的信息：</p>
<div class="code-tabs code-tabs_result_on"><div class="code-tabs__tools"><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_left" title="&amp;larr;" data-code-tabs-left="data-code-tabs-left"></button></div><div class="code-tabs__switches-wrap"><div class="code-tabs__switches" data-code-tabs-switches="data-code-tabs-switches"><div class="code-tabs__switches-items"><div class="code-tabs__switch code-tabs__switch_current">结果</div><div class="code-tabs__switch">script.js</div><div class="code-tabs__switch">style.css</div><div class="code-tabs__switch">index.html</div></div></div></div><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_right" title="&amp;rarr;" data-code-tabs-right="data-code-tabs-right"></button></div><div class="code-tabs__buttons"><a class="code-tabs__button code-tabs__button_external" target="_blank" title="在新窗口中打开" href="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseoverout/index.html"></a><a class="code-tabs__button code-tabs__button_edit" target="_blank" title="在沙箱中编辑" href="https://plnkr.co/edit/CCJ8xLcVkqcPlS9X?p=preview"></a></div></div><div class="code-tabs__content" data-code-tabs-content="data-code-tabs-content" style="height:280px"><div class="code-tabs__section code-tabs__section_current"><iframe class="code-tabs__result" src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseoverout/index.html"></iframe></div><div class="code-tabs__section"><pre class="language-javascript line-numbers"><code>container.onmouseover = container.onmouseout = handler;

function handler(event) {

  function str(el) {
    if (!el) return &quot;null&quot;
    return el.className || el.tagName;
  }

  log.value += event.type + ':  ' +
    'target=' + str(event.target) +
    ',  relatedTarget=' + str(event.relatedTarget) + &quot;\n&quot;;
  log.scrollTop = log.scrollHeight;

  if (event.type == 'mouseover') {
    event.target.style.background = 'pink'
  }
  if (event.type == 'mouseout') {
    event.target.style.background = ''
  }
}</code></pre></div><div class="code-tabs__section"><pre class="language-css line-numbers"><code>body,
html {
  margin: 0;
  padding: 0;
}

#container {
  border: 1px solid brown;
  padding: 10px;
  width: 330px;
  margin-bottom: 5px;
  box-sizing: border-box;
}

#log {
  height: 120px;
  width: 350px;
  display: block;
  box-sizing: border-box;
}

[class^=&quot;smiley-&quot;] {
  display: inline-block;
  width: 70px;
  height: 70px;
  border-radius: 50%;
  margin-right: 20px;
}

.smiley-green {
  background: #a9db7a;
  border: 5px solid #92c563;
  position: relative;
}

.smiley-green .left-eye {
  width: 18%;
  height: 18%;
  background: #84b458;
  position: relative;
  top: 29%;
  left: 22%;
  border-radius: 50%;
  float: left;
}

.smiley-green .right-eye {
  width: 18%;
  height: 18%;
  border-radius: 50%;
  position: relative;
  background: #84b458;
  top: 29%;
  right: 22%;
  float: right;
}

.smiley-green .smile {
  position: absolute;
  top: 67%;
  left: 16.5%;
  width: 70%;
  height: 20%;
  overflow: hidden;
}

.smiley-green .smile:after,
.smiley-green .smile:before {
  content: &quot;&quot;;
  position: absolute;
  top: -50%;
  left: 0%;
  border-radius: 50%;
  background: #84b458;
  height: 100%;
  width: 97%;
}

.smiley-green .smile:after {
  background: #84b458;
  height: 80%;
  top: -40%;
  left: 0%;
}

.smiley-yellow {
  background: #eed16a;
  border: 5px solid #dbae51;
  position: relative;
}

.smiley-yellow .left-eye {
  width: 18%;
  height: 18%;
  background: #dba652;
  position: relative;
  top: 29%;
  left: 22%;
  border-radius: 50%;
  float: left;
}

.smiley-yellow .right-eye {
  width: 18%;
  height: 18%;
  border-radius: 50%;
  position: relative;
  background: #dba652;
  top: 29%;
  right: 22%;
  float: right;
}

.smiley-yellow .smile {
  position: absolute;
  top: 67%;
  left: 19%;
  width: 65%;
  height: 14%;
  background: #dba652;
  overflow: hidden;
  border-radius: 8px;
}

.smiley-red {
  background: #ee9295;
  border: 5px solid #e27378;
  position: relative;
}

.smiley-red .left-eye {
  width: 18%;
  height: 18%;
  background: #d96065;
  position: relative;
  top: 29%;
  left: 22%;
  border-radius: 50%;
  float: left;
}

.smiley-red .right-eye {
  width: 18%;
  height: 18%;
  border-radius: 50%;
  position: relative;
  background: #d96065;
  top: 29%;
  right: 22%;
  float: right;
}

.smiley-red .smile {
  position: absolute;
  top: 57%;
  left: 16.5%;
  width: 70%;
  height: 20%;
  overflow: hidden;
}

.smiley-red .smile:after,
.smiley-red .smile:before {
  content: &quot;&quot;;
  position: absolute;
  top: 50%;
  left: 0%;
  border-radius: 50%;
  background: #d96065;
  height: 100%;
  width: 97%;
}

.smiley-red .smile:after {
  background: #d96065;
  height: 80%;
  top: 60%;
  left: 0%;
}</code></pre></div><div class="code-tabs__section"><pre class="language-markup line-numbers"><code>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;

&lt;body&gt;

  &lt;div id=&quot;container&quot;&gt;
    &lt;div class=&quot;smiley-green&quot;&gt;
      &lt;div class=&quot;left-eye&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;right-eye&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;smile&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;div class=&quot;smiley-yellow&quot;&gt;
      &lt;div class=&quot;left-eye&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;right-eye&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;smile&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;div class=&quot;smiley-red&quot;&gt;
      &lt;div class=&quot;left-eye&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;right-eye&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;smile&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;textarea id=&quot;log&quot;&gt;Events will show up here!
&lt;/textarea&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre></div></div></div><div class="important important_warn">
            <div class="important__header"><span class="important__type"><code>relatedTarget</code> 可以为 <code>null</code></span></div>
            <div class="important__content"><p><code>relatedTarget</code> 属性可以为 <code>null</code>。</p>
<p>这是正常现象，仅仅是意味着鼠标不是来自另一个元素，而是来自窗口之外。或者它离开了窗口。</p>
<p>当我们在代码中使用 <code>event.relatedTarget</code> 时，我们应该牢记这种可能性。如果我们访问 <code>event.relatedTarget.tagName</code>，那么就会出现错误。</p>
</div></div>
<h2><a class="main__anchor" name="tiao-guo-yuan-su" href="#tiao-guo-yuan-su">跳过元素</a></h2><p>当鼠标移动时，就会触发 <code>mousemove</code> 事件。但这并不意味着每个像素都会导致一个事件。</p>
<p>浏览器会一直检查鼠标的位置。如果发现了变化，就会触发事件。</p>
<p>这意味着，如果访问者非常快地移动鼠标，那么某些 DOM 元素就可能被跳过：</p>
<figure><div class="image" style="width:508px">
      <div class="image__ratio" style="padding-top:18.11023622047244%"></div>
      <object type="image/svg+xml" data="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-mouseout-over-elems.svg" width="508" height="92" class="image__image" data-use-theme>
        <img src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-mouseout-over-elems.svg" alt width="508" height="92">
      </object>
      </div></figure><p>如果鼠标从上图所示的 <code>#FROM</code> 快速移动到 <code>#TO</code> 元素，则中间的 <code>&lt;div&gt;</code>（或其中的一些）元素可能会被跳过。<code>mouseout</code> 事件可能会在 <code>#FROM</code> 上被触发，然后立即在 <code>#TO</code> 上触发 <code>mouseover</code>。</p>
<p>这对性能很有好处，因为可能有很多中间元素。我们并不真的想要处理每一个移入和离开的过程。</p>
<p>另一方面，我们应该记住，鼠标指针并不会“访问”所有元素。它可以“跳过”一些元素。</p>
<p>特别是，鼠标指针可能会从窗口外跳到页面的中间。在这种情况下，<code>relatedTarget</code> 为 <code>null</code>，因为它是从石头缝里蹦出来的（nowhere）：</p>
<figure><div class="image" style="width:440px">
      <div class="image__ratio" style="padding-top:41.590909090909086%"></div>
      <object type="image/svg+xml" data="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-mouseout-from-outside.svg" width="440" height="183" class="image__image" data-use-theme>
        <img src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-mouseout-from-outside.svg" alt width="440" height="183">
      </object>
      </div></figure><p>你可以在下面的测试台中“实时”查看。</p>
<p>它的 HTML 有两个嵌套的元素：<code>&lt;div id=&quot;child&quot;&gt;</code> 在 <code>&lt;div id=&quot;parent&quot;&gt;</code> 内部。如果将鼠标快速移动到它们上，则可能只有 <code>&lt;div id=&quot;child&quot;&gt;</code> 或者只有 <code>&lt;div id=&quot;parent&quot;&gt;</code> 触发事件，或者根本没有事件触发。</p>
<p>还可以将鼠标指针移动到 <code>&lt;div id=&quot;child&quot;&gt;</code> 中，然后将其快速向下移动过其父级元素。如果移动速度足够快，则父元素就会被忽略。鼠标会越过父元素而不会引起其注意。</p>
<div class="code-tabs code-tabs_result_on"><div class="code-tabs__tools"><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_left" title="&amp;larr;" data-code-tabs-left="data-code-tabs-left"></button></div><div class="code-tabs__switches-wrap"><div class="code-tabs__switches" data-code-tabs-switches="data-code-tabs-switches"><div class="code-tabs__switches-items"><div class="code-tabs__switch code-tabs__switch_current">结果</div><div class="code-tabs__switch">script.js</div><div class="code-tabs__switch">style.css</div><div class="code-tabs__switch">index.html</div></div></div></div><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_right" title="&amp;rarr;" data-code-tabs-right="data-code-tabs-right"></button></div><div class="code-tabs__buttons"><a class="code-tabs__button code-tabs__button_external" target="_blank" title="在新窗口中打开" href="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseoverout-fast/index.html"></a><a class="code-tabs__button code-tabs__button_edit" target="_blank" title="在沙箱中编辑" href="https://plnkr.co/edit/K0kAQuD39tIXdJDv?p=preview"></a></div></div><div class="code-tabs__content" data-code-tabs-content="data-code-tabs-content" style="height:360px"><div class="code-tabs__section code-tabs__section_current"><iframe class="code-tabs__result" src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseoverout-fast/index.html"></iframe></div><div class="code-tabs__section"><pre class="language-javascript line-numbers"><code>let parent = document.getElementById('parent');
parent.onmouseover = parent.onmouseout = parent.onmousemove = handler;

function handler(event) {
  let type = event.type;
  while (type &lt; 11) type += ' ';

  log(type + &quot; target=&quot; + event.target.id)
  return false;
}


function clearText() {
  text.value = &quot;&quot;;
  lastMessage = &quot;&quot;;
}

let lastMessageTime = 0;
let lastMessage = &quot;&quot;;
let repeatCounter = 1;

function log(message) {
  if (lastMessageTime == 0) lastMessageTime = new Date();

  let time = new Date();

  if (time - lastMessageTime &gt; 500) {
    message = '------------------------------\n' + message;
  }

  if (message === lastMessage) {
    repeatCounter++;
    if (repeatCounter == 2) {
      text.value = text.value.trim() + ' x 2\n';
    } else {
      text.value = text.value.slice(0, text.value.lastIndexOf('x') + 1) + repeatCounter + &quot;\n&quot;;
    }

  } else {
    repeatCounter = 1;
    text.value += message + &quot;\n&quot;;
  }

  text.scrollTop = text.scrollHeight;

  lastMessageTime = time;
  lastMessage = message;
}</code></pre></div><div class="code-tabs__section"><pre class="language-css line-numbers"><code>#parent {
  background: #99C0C3;
  width: 160px;
  height: 120px;
  position: relative;
}

#child {
  background: #FFDE99;
  width: 50%;
  height: 50%;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

textarea {
  height: 140px;
  width: 300px;
  display: block;
}</code></pre></div><div class="code-tabs__section"><pre class="language-markup line-numbers"><code>&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;

&lt;body&gt;

  &lt;div id=&quot;parent&quot;&gt;parent
    &lt;div id=&quot;child&quot;&gt;child&lt;/div&gt;
  &lt;/div&gt;
  &lt;textarea id=&quot;text&quot;&gt;&lt;/textarea&gt;
  &lt;input onclick=&quot;clearText()&quot; value=&quot;Clear&quot; type=&quot;button&quot;&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre></div></div></div><div class="important important_smart">
            <div class="important__header"><span class="important__type">如果 <code>mouseover</code> 被触发了，则必须有 <code>mouseout</code></span></div>
            <div class="important__content"><p>在鼠标快速移动的情况下，中间元素可能会被忽略，但是我们可以肯定一件事：如果鼠标指针“正式地”进入了一个元素（生成了 <code>mouseover</code> 事件），那么一旦它离开，我们就会得到 <code>mouseout</code>。</p>
</div></div>
<h2><a class="main__anchor" name="dang-yi-dong-dao-yi-ge-zi-yuan-su-shi-mouseout" href="#dang-yi-dong-dao-yi-ge-zi-yuan-su-shi-mouseout">当移动到一个子元素时 mouseout</a></h2><p><code>mouseout</code> 的一个重要功能 —— 当鼠标指针从元素移动到其后代时触发，例如在下面的这个 HTML 中，从 <code>#parent</code> 到 <code>#child</code>：</p>
<div id="fjzhnjez6f" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;div id=&quot;parent&quot;&gt;
  &lt;div id=&quot;child&quot;&gt;...&lt;/div&gt;
&lt;/div&gt;</code></pre>
        </div>
      </div>
      
      </div><p>如果我们在 <code>#parent</code> 上，然后将鼠标指针更深入地移入 <code>#child</code>，但是在 <code>#parent</code> 上会得到 <code>mouseout</code>！</p>
<figure><div class="image" style="width:274px">
      <div class="image__ratio" style="padding-top:52.18978102189781%"></div>
      <object type="image/svg+xml" data="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-to-child.svg" width="274" height="143" class="image__image" data-use-theme>
        <img src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-to-child.svg" alt width="274" height="143">
      </object>
      </div></figure><p>这听起来很奇怪，但很容易解释。</p>
<p><strong>根据浏览器的逻辑，鼠标指针随时可能位于单个元素上 —— 嵌套最多的那个元素（z-index 最大的那个）。</strong></p>
<p>因此，如果它转到另一个元素（甚至是一个后代），那么它将离开前一个元素。</p>
<p>请注意事件处理的另一个重要的细节。</p>
<p>后代的 <code>mouseover</code> 事件会冒泡。因此，如果 <code>#parent</code> 具有 <code>mouseover</code> 处理程序，它将被触发：</p>
<figure><div class="image" style="width:258px">
      <div class="image__ratio" style="padding-top:55.42635658914728%"></div>
      <object type="image/svg+xml" data="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-bubble-nested.svg" width="258" height="143" class="image__image" data-use-theme>
        <img src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseover-bubble-nested.svg" alt width="258" height="143">
      </object>
      </div></figure><p>你可以在下面这个示例中很清晰地看到这一点：<code>&lt;div id=&quot;child&quot;&gt;</code> 位于 <code>&lt;div id=&quot;parent&quot;&gt;</code> 内部。<code>#parent</code> 元素上有 <code>mouseover/out</code> 的处理程序，这些处理程序用于输出事件详细信息。</p>
<p>如果你将鼠标从 <code>#parent</code> 移动到 <code>#child</code>，那么你会看到在 <code>#parent</code> 上有两个事件:</p>
<ol>
<li><code>mouseout [target: parent]</code>（离开 parent），然后</li>
<li><code>mouseover [target: child]</code>（来到 child，冒泡）。</li>
</ol>
<div class="code-tabs code-tabs_result_on"><div class="code-tabs__tools"><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_left" title="&amp;larr;" data-code-tabs-left="data-code-tabs-left"></button></div><div class="code-tabs__switches-wrap"><div class="code-tabs__switches" data-code-tabs-switches="data-code-tabs-switches"><div class="code-tabs__switches-items"><div class="code-tabs__switch code-tabs__switch_current">结果</div><div class="code-tabs__switch">script.js</div><div class="code-tabs__switch">style.css</div><div class="code-tabs__switch">index.html</div></div></div></div><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_right" title="&amp;rarr;" data-code-tabs-right="data-code-tabs-right"></button></div><div class="code-tabs__buttons"><a class="code-tabs__button code-tabs__button_external" target="_blank" title="在新窗口中打开" href="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseoverout-child/index.html"></a><a class="code-tabs__button code-tabs__button_edit" target="_blank" title="在沙箱中编辑" href="https://plnkr.co/edit/uYxpM0qtB4zNKWhP?p=preview"></a></div></div><div class="code-tabs__content" data-code-tabs-content="data-code-tabs-content" style="height:360px"><div class="code-tabs__section code-tabs__section_current"><iframe class="code-tabs__result" src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseoverout-child/index.html"></iframe></div><div class="code-tabs__section"><pre class="language-javascript line-numbers"><code>function mouselog(event) {
  let d = new Date();
  text.value += `${d.getHours()}:${d.getMinutes()}:${d.getSeconds()} | ${event.type} [target: ${event.target.id}]\n`.replace(/(:|^)(\d\D)/, '$10$2');
  text.scrollTop = text.scrollHeight;
}</code></pre></div><div class="code-tabs__section"><pre class="language-css line-numbers"><code>#parent {
  background: #99C0C3;
  width: 160px;
  height: 120px;
  position: relative;
}

#child {
  background: #FFDE99;
  width: 50%;
  height: 50%;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

textarea {
  height: 140px;
  width: 300px;
  display: block;
}</code></pre></div><div class="code-tabs__section"><pre class="language-markup line-numbers"><code>&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;

&lt;body&gt;

  &lt;div id=&quot;parent&quot; onmouseover=&quot;mouselog(event)&quot; onmouseout=&quot;mouselog(event)&quot;&gt;parent
    &lt;div id=&quot;child&quot;&gt;child&lt;/div&gt;
  &lt;/div&gt;

  &lt;textarea id=&quot;text&quot;&gt;&lt;/textarea&gt;
  &lt;input type=&quot;button&quot; onclick=&quot;text.value=''&quot; value=&quot;Clear&quot;&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre></div></div></div><p>如上例所示，当鼠标指针从 <code>#parent</code> 元素移动到 <code>#child</code> 时，会在父元素上触发两个处理程序：<code>mouseout</code> 和 <code>mouseover</code>：</p>
<div id="2luyqq308e" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>parent.onmouseout = function(event) {
  /* event.target: parent element */
};
parent.onmouseover = function(event) {
  /* event.target: child element (bubbled) */
};</code></pre>
        </div>
      </div>
      
      </div><p><strong>如果我们不检查处理程序中的 <code>event.target</code>，那么似乎鼠标指针离开了 <code>#parent</code> 元素，然后立即回到了它上面。</strong></p>
<p>但是事实并非如此！鼠标指针仍然位于父元素上，它只是更深入地移入了子元素。</p>
<p>如果离开父元素时有一些行为（action），例如一个动画在 <code>parent.onmouseout</code> 中运行，当鼠标指针深入 <code>#parent</code> 时，我们并不希望发生这种行为。</p>
<p>为了避免它，我们可以在处理程序中检查 <code>relatedTarget</code>，如果鼠标指针仍在元素内，则忽略此类事件。</p>
<p>另外，我们可以使用其他事件：<code>mouseenter</code> 和 <code>mouseleave</code>，它们没有此类问题，接下来我们就对其进行详细介绍。</p>
<h2><a class="main__anchor" name="shi-jian-mouseenter-he-mouseleave" href="#shi-jian-mouseenter-he-mouseleave">事件 mouseenter 和 mouseleave</a></h2><p>事件 <code>mouseenter/mouseleave</code> 类似于 <code>mouseover/mouseout</code>。它们在鼠标指针进入/离开元素时触发。</p>
<p>但是有两个重要的区别：</p>
<ol>
<li>元素内部与后代之间的转换不会产生影响。</li>
<li>事件 <code>mouseenter/mouseleave</code> 不会冒泡。</li>
</ol>
<p>这些事件非常简单。</p>
<p>当鼠标指针进入一个元素时 —— 会触发 <code>mouseenter</code>。而鼠标指针在元素或其后代中的确切位置无关紧要。</p>
<p>当鼠标指针离开该元素时，事件 <code>mouseleave</code> 才会触发。</p>
<p>这个例子和上面的例子相似，但是现在最顶部的元素有 <code>mouseenter/mouseleave</code> 而不是 <code>mouseover/mouseout</code>。</p>
<p>正如你所看到的，唯一生成的事件是与将鼠标指针移入或移出顶部元素有关的事件。当鼠标指针进入 child 并返回时，什么也没发生。在后代之间的移动会被忽略。</p>
<div class="code-tabs code-tabs_result_on"><div class="code-tabs__tools"><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_left" title="&amp;larr;" data-code-tabs-left="data-code-tabs-left"></button></div><div class="code-tabs__switches-wrap"><div class="code-tabs__switches" data-code-tabs-switches="data-code-tabs-switches"><div class="code-tabs__switches-items"><div class="code-tabs__switch code-tabs__switch_current">结果</div><div class="code-tabs__switch">script.js</div><div class="code-tabs__switch">style.css</div><div class="code-tabs__switch">index.html</div></div></div></div><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_right" title="&amp;rarr;" data-code-tabs-right="data-code-tabs-right"></button></div><div class="code-tabs__buttons"><a class="code-tabs__button code-tabs__button_external" target="_blank" title="在新窗口中打开" href="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseleave/index.html"></a><a class="code-tabs__button code-tabs__button_edit" target="_blank" title="在沙箱中编辑" href="https://plnkr.co/edit/CT88vZ18GUO58kB1?p=preview"></a></div></div><div class="code-tabs__content" data-code-tabs-content="data-code-tabs-content" style="height:340px"><div class="code-tabs__section code-tabs__section_current"><iframe class="code-tabs__result" src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseleave/index.html"></iframe></div><div class="code-tabs__section"><pre class="language-javascript line-numbers"><code>function mouselog(event) {
  let d = new Date();
  text.value += `${d.getHours()}:${d.getMinutes()}:${d.getSeconds()} | ${event.type} [target: ${event.target.id}]\n`.replace(/(:|^)(\d\D)/, '$10$2');
  text.scrollTop = text.scrollHeight;
}</code></pre></div><div class="code-tabs__section"><pre class="language-css line-numbers"><code>#parent {
  background: #99C0C3;
  width: 160px;
  height: 120px;
  position: relative;
}

#child {
  background: #FFDE99;
  width: 50%;
  height: 50%;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

textarea {
  height: 140px;
  width: 300px;
  display: block;
}</code></pre></div><div class="code-tabs__section"><pre class="language-markup line-numbers"><code>&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;

&lt;body&gt;

  &lt;div id=&quot;parent&quot; onmouseenter=&quot;mouselog(event)&quot; onmouseleave=&quot;mouselog(event)&quot;&gt;parent
    &lt;div id=&quot;child&quot;&gt;child&lt;/div&gt;
  &lt;/div&gt;

  &lt;textarea id=&quot;text&quot;&gt;&lt;/textarea&gt;
  &lt;input type=&quot;button&quot; onclick=&quot;text.value=''&quot; value=&quot;Clear&quot;&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre></div></div></div><h2><a class="main__anchor" name="shi-jian-wei-tuo" href="#shi-jian-wei-tuo">事件委托</a></h2><p>事件 <code>mouseenter/leave</code> 非常简单且易用。但它们不会冒泡。因此，我们不能使用它们来进行事件委托。</p>
<p>假设我们要处理表格的单元格的鼠标进入/离开。并且这里有数百个单元格。</p>
<p>通常的解决方案是 —— 在 <code>&lt;table&gt;</code> 中设置处理程序，并在那里处理事件。但 <code>mouseenter/leave</code> 不会冒泡。因此，如果类似的事件发生在 <code>&lt;td&gt;</code> 上，那么只有 <code>&lt;td&gt;</code> 上的处理程序才能捕获到它。</p>
<p><code>&lt;table&gt;</code> 上的 <code>mouseenter/leave</code> 的处理程序仅在鼠标指针进入/离开整个表格时才会触发。无法获取有关其内部移动的任何信息。</p>
<p>因此，让我们使用 <code>mouseover/mouseout</code>。</p>
<p>让我们从高亮显示鼠标指针下的元素的简单处理程序开始：</p>
<div id="l7qgcttcnp" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// 高亮显示鼠标指针下的元素
table.onmouseover = function(event) {
  let target = event.target;
  target.style.background = 'pink';
};

table.onmouseout = function(event) {
  let target = event.target;
  target.style.background = '';
};</code></pre>
        </div>
      </div>
      
      </div><p>现在它们已经激活了。当鼠标在下面这个表格的各个元素上移动时，当前位于鼠标指针下的元素会被高亮显示：</p>
<div class="code-tabs code-tabs_result_on"><div class="code-tabs__tools"><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_left" title="&amp;larr;" data-code-tabs-left="data-code-tabs-left"></button></div><div class="code-tabs__switches-wrap"><div class="code-tabs__switches" data-code-tabs-switches="data-code-tabs-switches"><div class="code-tabs__switches-items"><div class="code-tabs__switch code-tabs__switch_current">结果</div><div class="code-tabs__switch">script.js</div><div class="code-tabs__switch">style.css</div><div class="code-tabs__switch">index.html</div></div></div></div><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_right" title="&amp;rarr;" data-code-tabs-right="data-code-tabs-right"></button></div><div class="code-tabs__buttons"><a class="code-tabs__button code-tabs__button_external" target="_blank" title="在新窗口中打开" href="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseenter-mouseleave-delegation/index.html"></a><a class="code-tabs__button code-tabs__button_edit" target="_blank" title="在沙箱中编辑" href="https://plnkr.co/edit/1SWbEcIsQx5vjBao?p=preview"></a></div></div><div class="code-tabs__content" data-code-tabs-content="data-code-tabs-content" style="height:480px"><div class="code-tabs__section code-tabs__section_current"><iframe class="code-tabs__result" src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseenter-mouseleave-delegation/index.html"></iframe></div><div class="code-tabs__section"><pre class="language-javascript line-numbers"><code>table.onmouseover = function(event) {
  let target = event.target;
  target.style.background = 'pink';

  text.value += `over -&gt; ${target.tagName}\n`;
  text.scrollTop = text.scrollHeight;
};

table.onmouseout = function(event) {
  let target = event.target;
  target.style.background = '';

  text.value += `out &lt;- ${target.tagName}\n`;
  text.scrollTop = text.scrollHeight;
};</code></pre></div><div class="code-tabs__section"><pre class="language-css line-numbers"><code>#text {
  display: block;
  height: 100px;
  width: 456px;
}

#table th {
  text-align: center;
  font-weight: bold;
}

#table td {
  width: 150px;
  white-space: nowrap;
  text-align: center;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 12px;
  cursor: pointer;
}

#table .nw {
  background: #999;
}

#table .n {
  background: #03f;
  color: #fff;
}

#table .ne {
  background: #ff6;
}

#table .w {
  background: #ff0;
}

#table .c {
  background: #60c;
  color: #fff;
}

#table .e {
  background: #09f;
  color: #fff;
}

#table .sw {
  background: #963;
  color: #fff;
}

#table .s {
  background: #f60;
  color: #fff;
}

#table .se {
  background: #0c3;
  color: #fff;
}

#table .highlight {
  background: red;
}</code></pre></div><div class="code-tabs__section"><pre class="language-markup line-numbers"><code>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;

&lt;body&gt;


  &lt;table id=&quot;table&quot;&gt;
    &lt;tr&gt;
      &lt;th colspan=&quot;3&quot;&gt;&lt;em&gt;Bagua&lt;/em&gt; Chart: Direction, Element, Color, Meaning&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&quot;nw&quot;&gt;&lt;strong&gt;Northwest&lt;/strong&gt;
        &lt;br&gt;Metal
        &lt;br&gt;Silver
        &lt;br&gt;Elders
      &lt;/td&gt;
      &lt;td class=&quot;n&quot;&gt;&lt;strong&gt;North&lt;/strong&gt;
        &lt;br&gt;Water
        &lt;br&gt;Blue
        &lt;br&gt;Change
      &lt;/td&gt;
      &lt;td class=&quot;ne&quot;&gt;&lt;strong&gt;Northeast&lt;/strong&gt;
        &lt;br&gt;Earth
        &lt;br&gt;Yellow
        &lt;br&gt;Direction
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&quot;w&quot;&gt;&lt;strong&gt;West&lt;/strong&gt;
        &lt;br&gt;Metal
        &lt;br&gt;Gold
        &lt;br&gt;Youth
      &lt;/td&gt;
      &lt;td class=&quot;c&quot;&gt;&lt;strong&gt;Center&lt;/strong&gt;
        &lt;br&gt;All
        &lt;br&gt;Purple
        &lt;br&gt;Harmony
      &lt;/td&gt;
      &lt;td class=&quot;e&quot;&gt;&lt;strong&gt;East&lt;/strong&gt;
        &lt;br&gt;Wood
        &lt;br&gt;Blue
        &lt;br&gt;Future
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&quot;sw&quot;&gt;&lt;strong&gt;Southwest&lt;/strong&gt;
        &lt;br&gt;Earth
        &lt;br&gt;Brown
        &lt;br&gt;Tranquility
      &lt;/td&gt;
      &lt;td class=&quot;s&quot;&gt;&lt;strong&gt;South&lt;/strong&gt;
        &lt;br&gt;Fire
        &lt;br&gt;Orange
        &lt;br&gt;Fame
      &lt;/td&gt;
      &lt;td class=&quot;se&quot;&gt;&lt;strong&gt;Southeast&lt;/strong&gt;
        &lt;br&gt;Wood
        &lt;br&gt;Green
        &lt;br&gt;Romance
      &lt;/td&gt;
    &lt;/tr&gt;

  &lt;/table&gt;

  &lt;textarea id=&quot;text&quot;&gt;&lt;/textarea&gt;

  &lt;input type=&quot;button&quot; onclick=&quot;text.value=''&quot; value=&quot;Clear&quot;&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre></div></div></div><p>在我们的例子中，我们想要处理表格的单元格 <code>&lt;td&gt;</code> 之间的移动：进入一个单元格并离开它。我们对其他移动并不感兴趣，例如在单元格内部或在所有单元格的外部。让我们把这些过滤掉。</p>
<p>我们可以这样做：</p>
<ul>
<li>在变量中记住当前被高亮显示的 <code>&lt;td&gt;</code>，让我们称它为 <code>currentElem</code>。</li>
<li><code>mouseover</code> ——  如果我们仍然在当前的 <code>&lt;td&gt;</code> 中，则忽略该事件。</li>
<li><code>mouseout</code> —— 如果没有离开当前的 <code>&lt;td&gt;</code>，则忽略。</li>
</ul>
<p>这是说明所有可能情况的代码示例：</p>
<div id="awwuw0ks6w" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// 现在位于鼠标下方的 &lt;td&gt;（如果有）
let currentElem = null;

table.onmouseover = function(event) {
  // 在进入一个新的元素前，鼠标总是会先离开前一个元素
  // 如果设置了 currentElem，那么我们就没有鼠标所悬停在的前一个 &lt;td&gt;，
  // 忽略此事件
  if (currentElem) return;

  let target = event.target.closest('td');

  // 我们移动到的不是一个 &lt;td&gt; —— 忽略
  if (!target) return;

  // 现在移动到了 &lt;td&gt; 上，但在处于了我们表格的外部（可能因为是嵌套的表格）
  // 忽略
  if (!table.contains(target)) return;

  // 给力！我们进入了一个新的 &lt;td&gt;
  currentElem = target;
  onEnter(currentElem);
};


table.onmouseout = function(event) {
  // 如果我们现在处于所有 &lt;td&gt; 的外部，则忽略此事件
  // 这可能是一个表格内的移动，但是在 &lt;td&gt; 外，
  // 例如从一个 &lt;tr&gt; 到另一个 &lt;tr&gt;
  if (!currentElem) return;

  // 我们将要离开这个元素 —— 去哪儿？可能是去一个后代？
  let relatedTarget = event.relatedTarget;

  while (relatedTarget) {
    // 到父链上并检查 —— 我们是否还在 currentElem 内
    // 然后发现，这只是一个内部移动 —— 忽略它
    if (relatedTarget == currentElem) return;

    relatedTarget = relatedTarget.parentNode;
  }

  // 我们离开了 &lt;td&gt;。真的。
  onLeave(currentElem);
  currentElem = null;
};

// 任何处理进入/离开一个元素的函数
function onEnter(elem) {
  elem.style.background = 'pink';

  // 在文本区域显示它
  text.value += `over -&gt; ${currentElem.tagName}.${currentElem.className}\n`;
  text.scrollTop = 1e6;
}

function onLeave(elem) {
  elem.style.background = '';

  // 在文本区域显示它
  text.value += `out &lt;- ${elem.tagName}.${elem.className}\n`;
  text.scrollTop = 1e6;
}</code></pre>
        </div>
      </div>
      
      </div><p>再次，重要的功能是：</p>
<ol>
<li>它使用事件委托来处理表格中任何 <code>&lt;td&gt;</code> 的进入/离开。因此，它依赖于 <code>mouseover/out</code> 而不是 <code>mouseenter/leave</code>，<code>mouseenter/leave</code> 不会冒泡，因此也不允许事件委托。</li>
<li>额外的事件，例如在 <code>&lt;td&gt;</code> 的后代之间移动都会被过滤掉，因此 <code>onEnter/Leave</code> 仅在鼠标指针进入/离开 <code>&lt;td&gt;</code> 整体时才会运行。</li>
</ol>
<p>这是带有所有详细信息的完整示例：</p>
<div class="code-tabs code-tabs_result_on"><div class="code-tabs__tools"><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_left" title="&amp;larr;" data-code-tabs-left="data-code-tabs-left"></button></div><div class="code-tabs__switches-wrap"><div class="code-tabs__switches" data-code-tabs-switches="data-code-tabs-switches"><div class="code-tabs__switches-items"><div class="code-tabs__switch code-tabs__switch_current">结果</div><div class="code-tabs__switch">script.js</div><div class="code-tabs__switch">style.css</div><div class="code-tabs__switch">index.html</div></div></div></div><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_right" title="&amp;rarr;" data-code-tabs-right="data-code-tabs-right"></button></div><div class="code-tabs__buttons"><a class="code-tabs__button code-tabs__button_external" target="_blank" title="在新窗口中打开" href="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseenter-mouseleave-delegation-2/index.html"></a><a class="code-tabs__button code-tabs__button_edit" target="_blank" title="在沙箱中编辑" href="https://plnkr.co/edit/CvYYwQZ4hl2OYTZw?p=preview"></a></div></div><div class="code-tabs__content" data-code-tabs-content="data-code-tabs-content" style="height:460px"><div class="code-tabs__section code-tabs__section_current"><iframe class="code-tabs__result" src="../article/mousemove-mouseover-mouseout-mouseenter-mouseleave/mouseenter-mouseleave-delegation-2/index.html"></iframe></div><div class="code-tabs__section"><pre class="language-javascript line-numbers"><code>// 现在位于鼠标下方的 &lt;td&gt;（如果有）
let currentElem = null;

table.onmouseover = function(event) {
  // 在进入一个新的元素前，鼠标总是会先离开前一个元素
  // 如果设置了 currentElem，那么我们就没有鼠标所悬停在的前一个 &lt;td&gt;，
  // 忽略此事件
  if (currentElem) return;

  let target = event.target.closest('td');

  // 我们移动到的不是一个 &lt;td&gt; —— 忽略
  if (!target) return;

  // 现在移动到了 &lt;td&gt; 上，但在处于了我们表格的外部（可能因为是嵌套的表格）
  // 忽略
  if (!table.contains(target)) return;

  // 给力！我们进入了一个新的 &lt;td&gt;
  currentElem = target;
  onEnter(currentElem);
};


table.onmouseout = function(event) {
  // 如果我们现在处于所有 &lt;td&gt; 的外部，则忽略此事件
  // 这可能是一个表格内的移动，但是在 &lt;td&gt; 外，
  // 例如从一个 &lt;tr&gt; 到另一个 &lt;tr&gt;
  if (!currentElem) return;

  // 我们将要离开这个元素 —— 去哪儿？可能是去一个后代？
  let relatedTarget = event.relatedTarget;

  while (relatedTarget) {
    // 到父链上并检查 —— 我们是否还在 currentElem 内
    // 然后发现，这只是一个内部移动 —— 忽略它
    if (relatedTarget == currentElem) return;

    relatedTarget = relatedTarget.parentNode;
  }

  // 我们离开了 &lt;td&gt;。真的。
  onLeave(currentElem);
  currentElem = null;
};

// 任何处理进入/离开一个元素的函数
function onEnter(elem) {
  elem.style.background = 'pink';

  // 在文本区域显示它
  text.value += `over -&gt; ${currentElem.tagName}.${currentElem.className}\n`;
  text.scrollTop = 1e6;
}

function onLeave(elem) {
  elem.style.background = '';

  // 在文本区域显示它
  text.value += `out &lt;- ${elem.tagName}.${elem.className}\n`;
  text.scrollTop = 1e6;
}</code></pre></div><div class="code-tabs__section"><pre class="language-css line-numbers"><code>#text {
  display: block;
  height: 100px;
  width: 456px;
}

#table th {
  text-align: center;
  font-weight: bold;
}

#table td {
  width: 150px;
  white-space: nowrap;
  text-align: center;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 12px;
  cursor: pointer;
}

#table .nw {
  background: #999;
}

#table .n {
  background: #03f;
  color: #fff;
}

#table .ne {
  background: #ff6;
}

#table .w {
  background: #ff0;
}

#table .c {
  background: #60c;
  color: #fff;
}

#table .e {
  background: #09f;
  color: #fff;
}

#table .sw {
  background: #963;
  color: #fff;
}

#table .s {
  background: #f60;
  color: #fff;
}

#table .se {
  background: #0c3;
  color: #fff;
}

#table .highlight {
  background: red;
}</code></pre></div><div class="code-tabs__section"><pre class="language-markup line-numbers"><code>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;

&lt;body&gt;


  &lt;table id=&quot;table&quot;&gt;
    &lt;tr&gt;
      &lt;th colspan=&quot;3&quot;&gt;&lt;em&gt;Bagua&lt;/em&gt; Chart: Direction, Element, Color, Meaning&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&quot;nw&quot;&gt;&lt;strong&gt;Northwest&lt;/strong&gt;
        &lt;br&gt;Metal
        &lt;br&gt;Silver
        &lt;br&gt;Elders
      &lt;/td&gt;
      &lt;td class=&quot;n&quot;&gt;&lt;strong&gt;North&lt;/strong&gt;
        &lt;br&gt;Water
        &lt;br&gt;Blue
        &lt;br&gt;Change
      &lt;/td&gt;
      &lt;td class=&quot;ne&quot;&gt;&lt;strong&gt;Northeast&lt;/strong&gt;
        &lt;br&gt;Earth
        &lt;br&gt;Yellow
        &lt;br&gt;Direction
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&quot;w&quot;&gt;&lt;strong&gt;West&lt;/strong&gt;
        &lt;br&gt;Metal
        &lt;br&gt;Gold
        &lt;br&gt;Youth
      &lt;/td&gt;
      &lt;td class=&quot;c&quot;&gt;&lt;strong&gt;Center&lt;/strong&gt;
        &lt;br&gt;All
        &lt;br&gt;Purple
        &lt;br&gt;Harmony
      &lt;/td&gt;
      &lt;td class=&quot;e&quot;&gt;&lt;strong&gt;East&lt;/strong&gt;
        &lt;br&gt;Wood
        &lt;br&gt;Blue
        &lt;br&gt;Future
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&quot;sw&quot;&gt;&lt;strong&gt;Southwest&lt;/strong&gt;
        &lt;br&gt;Earth
        &lt;br&gt;Brown
        &lt;br&gt;Tranquility
      &lt;/td&gt;
      &lt;td class=&quot;s&quot;&gt;&lt;strong&gt;South&lt;/strong&gt;
        &lt;br&gt;Fire
        &lt;br&gt;Orange
        &lt;br&gt;Fame
      &lt;/td&gt;
      &lt;td class=&quot;se&quot;&gt;&lt;strong&gt;Southeast&lt;/strong&gt;
        &lt;br&gt;Wood
        &lt;br&gt;Green
        &lt;br&gt;Romance
      &lt;/td&gt;
    &lt;/tr&gt;

  &lt;/table&gt;

  &lt;textarea id=&quot;text&quot;&gt;&lt;/textarea&gt;

  &lt;input type=&quot;button&quot; onclick=&quot;text.value=''&quot; value=&quot;Clear&quot;&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre></div></div></div><p>尝试将鼠标指针移入和移出表格单元格及其内部。快还是慢都没关系。与前面的示例不同，只有 <code>&lt;td&gt;</code> 被作为一个整体高亮显示。</p>
<h2><a class="main__anchor" name="zong-jie" href="#zong-jie">总结</a></h2><p>我们讲了 <code>mouseover</code>，<code>mouseout</code>，<code>mousemove</code>，<code>mouseenter</code> 和 <code>mouseleave</code> 事件。</p>
<p>以下这些内容要注意：</p>
<ul>
<li>快速移动鼠标可能会跳过中间元素。</li>
<li><code>mouseover/out</code> 和 <code>mouseenter/leave</code> 事件还有一个附加属性：<code>relatedTarget</code>。这就是我们来自/到的元素，是对 <code>target</code> 的补充。</li>
</ul>
<p>即使我们从父元素转到子元素时，也会触发 <code>mouseover/out</code> 事件。浏览器假定鼠标一次只会位于一个元素上 —— 最深的那个。</p>
<p><code>mouseenter/leave</code> 事件在这方面不同：它们仅在鼠标进入和离开元素时才触发。并且它们不会冒泡。</p>
</div></article><div class="tasks formatted"><h2 class="tasks__title" id="tasks"><a class="tasks__title-anchor main__anchor main__anchor main__anchor_noicon" href="#tasks">任务</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#gai-jin-de-gong-ju-ti-shi-hang-wei" name="gai-jin-de-gong-ju-ti-shi-hang-wei">改进的工具提示行为</a></h3><a class="task__open-link" href="../task/behavior-nested-tooltip/index.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="任务的重要程度有多高，等级从 1 到 5。">重要程度: 5</span></div><div class="task__content"><div class="task__formatted"><p>编写 JavaScript，在带有 <code>data-tooltip</code> 特性（attribute）的元素上显示一个工具提示。该特性的值应该成为工具提示的文本。</p>
<p>与任务 <a href="../task/behavior-tooltip/index.html">工具提示行为</a> 类似，但这里可以嵌套带有注解（annotated）的元素。并且显示的是嵌套最深的工具提示。</p>
<p>同一时间只能显示一个工具提示。</p>
<p>例如：</p>
<div id="ldsw3evzbg" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;div data-tooltip=&quot;Here – is the house interior&quot; id=&quot;house&quot;&gt;
  &lt;div data-tooltip=&quot;Here – is the roof&quot; id=&quot;roof&quot;&gt;&lt;/div&gt;
  ...
  &lt;a href=&quot;https://en.wikipedia.org/wiki/The_Three_Little_Pigs&quot; data-tooltip=&quot;Read on…&quot;&gt;Hover over me&lt;/a&gt;
&lt;/div&gt;</code></pre>
        </div>
      </div>
      
      </div><p>在 iframe 中的结果：</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"></div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:300px" src="https://zh.js.cx/task/behavior-nested-tooltip/solution/"></iframe>
  </div><p><a href="https://plnkr.co/edit/okpK3a0M8RFA0onj?p=preview" target="_blank" data-plunk-id="okpK3a0M8RFA0onj">打开一个任务沙箱。</a></p></div><button class="task__solution" type="button">解决方案</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p><a href="https://plnkr.co/edit/Gec0Y5nFRaJTrCgO?p=preview" target="_blank" data-plunk-id="Gec0Y5nFRaJTrCgO">使用沙箱打开解决方案。</a></p></div></div><button class="close-button task__answer-close" type="button" title="关闭"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#zhi-neng-gong-ju-ti-shi" name="zhi-neng-gong-ju-ti-shi">“智能”工具提示</a></h3><a class="task__open-link" href="../task/hoverintent/index.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="任务的重要程度有多高，等级从 1 到 5。">重要程度: 5</span></div><div class="task__content"><div class="task__formatted"><p>编写一个函数，该函数仅在访问者将鼠标 <strong>移至</strong> 元素而不是 <strong>移过</strong> 元素的情况下，在该元素上显示工具提示。</p>
<p>换句话说，如果访问者将鼠标移至元素上，并停下来 —— 显示工具提示。如果他们只是将鼠标移过元素，那就没必要显示，谁想要多余的闪烁呢？</p>
<p>从技术上说，我们可以测量元素上的鼠标移动速度，如果速度很慢，那么我们就假定它 <strong>在元素上</strong>，并显示工具提示，如果速度很快 —— 那么我们就忽略它。</p>
<p>为此，我们创建一个通用对象 <code>new HoverIntent(options)</code>。</p>
<p>其 <code>options</code>：</p>
<ul>
<li><code>elem</code> —— 要跟踪的元素。</li>
<li><code>over</code> —— 鼠标移动到元素上时要调用的函数：即，鼠标在元素上的移动速度很慢，或者停在该元素上。</li>
<li><code>out</code> —— 当鼠标离开元素时调用的函数（如果 <code>over</code> 已经被调用过了）。</li>
</ul>
<p>在工具提示中使用此类对象的示例：</p>
<div id="lrepzqvbqo" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// 一个简单的工具提示
let tooltip = document.createElement('div');
tooltip.className = &quot;tooltip&quot;;
tooltip.innerHTML = &quot;Tooltip&quot;;

// 该对象将跟踪鼠标，并调用 over/out
new HoverIntent({
  elem,
  over() {
    tooltip.style.left = elem.getBoundingClientRect().left + 'px';
    tooltip.style.top = elem.getBoundingClientRect().bottom + 5 + 'px';
    document.body.append(tooltip);
  },
  out() {
    tooltip.remove();
  }
});</code></pre>
        </div>
      </div>
      
      </div><p>示例：</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"></div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:140px" src="https://zh.js.cx/task/hoverintent/solution/"></iframe>
  </div><p>如果你将鼠标快速地从“时钟”上移动过去，那么什么都不会发生，如果你使用鼠标在“时钟”上慢慢移动，或者停在“时钟”上，则会出现一个工具提示。</p>
<p>请注意：当鼠标指针在“时钟”的元素之间移动时，工具提示不会“闪烁”</p>
<p><a href="https://plnkr.co/edit/tmVyjkMuZMkOiOKX?p=preview" target="_blank" data-plunk-id="tmVyjkMuZMkOiOKX">打开带有测试的沙箱。</a></p></div><button class="task__solution" type="button">解决方案</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p>算法看起来很简单：</p>
<ol>
<li>将 <code>onmouseover/out</code> 处理程序放在元素上。在这里也可以使用 <code>onmouseenter/leave</code>，但是它们的通用性较差，如果我们想引入事件委托时，它则无法使用。</li>
<li>当鼠标指针进入元素时，开始测量 <code>mousemove</code> 上的速度。</li>
<li>如果速度慢，则运行 <code>over</code>。</li>
<li>当我们的鼠标指针要移出元素，并且 <code>over</code> 也执行了，则会运行 <code>out</code>。</li>
</ol>
<p>但是如何测量速度？</p>
<p>第一个想法是：每 <code>100ms</code> 运行一次函数，并测量前坐标和新坐标之间的距离。如果很小，那么速度就很小。</p>
<p>不幸的是，在 JavaScript 中无法获取“鼠标当前坐标”。没有像 <code>getCurrentMouseCoordinates()</code> 这样的函数。</p>
<p>获取坐标的唯一方法是监听例如 <code>mousemove</code> 这样的鼠标事件。</p>
<p>因此，我们可以在 <code>mousemove</code> 上设置一个处理程序来跟踪坐标并记住它们。然后我每 <code>100ms</code> 比较一次。</p>
<p>P.S. 请注意：解决方案测试使用 <code>dispatchEvent</code> 来检查工具提示是否正确。</p>
<p><a href="https://plnkr.co/edit/qxTdgBT6MxTd4JbN?p=preview" target="_blank" data-plunk-id="qxTdgBT6MxTd4JbN">使用沙箱的测试功能打开解决方案。</a></p></div></div><button class="close-button task__answer-close" type="button" title="关闭"></button></div></div></div></div></div></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="../mouse-events-basics/index.html" data-tooltip="鼠标事件"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">上一节</span></a><a class="page__nav page__nav_next" href="../mouse-drag-and-drop/index.html" data-tooltip="鼠标拖放事件"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">下一节</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">分享</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fmousemove-mouseover-mouseout-mouseenter-mouseleave" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fmousemove-mouseover-mouseout-mouseenter-mouseleave" rel="nofollow"></a></div><div class="article-tablet-foot__map"><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map"><span class="map__text">教程路线图</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">评论</a></h2><div class="comments__read-before"><span class="comments__read-before-link">在评论之前先阅读本内容…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>如果你发现教程有错误，或者有其他需要修改和提升的地方 — 请 <a href="https://github.com/javascript-tutorial/zh.javascript.info/issues">提交一个 GitHub issue</a> 或 pull request，而不是在这评论。</li><li>如果你对教程的内容有不理解的地方 — 请详细说明。</li><li>使用 <code>&lt;code&gt;</code> 标签插入只有几个词的代码，插入多行代码可以使用 <code>&lt;pre&gt;</code> 标签，对于超过 10 行的代码，建议你使用沙箱（<a href="https://plnkr.co/edit/?p=preview">plnkr</a>，<a href="https://jsbin.com">JSBin</a>，<a href="http://codepen.io">codepen</a>…）</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/zh.javascript.info\/mousemove-mouseover-mouseout-mouseenter-mouseleave","identifier":"\/mousemove-mouseover-mouseout-mouseenter-mouseleave"}); };</script><script>var disqus_shortname = "zh-javascript-info";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map" data-tooltip="教程路线图"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">章节</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="../event-details/index.html">UI 事件</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">课程导航</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#shi-jian-mouseovermouseoutrelatedtarget">事件 mouseover/mouseout，relatedTarget</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#tiao-guo-yuan-su">跳过元素</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#dang-yi-dong-dao-yi-ge-zi-yuan-su-shi-mouseout">当移动到一个子元素时 mouseout</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#shi-jian-mouseenter-he-mouseleave">事件 mouseenter 和 mouseleave</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#shi-jian-wei-tuo">事件委托</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#zong-jie">总结</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#tasks">任务 (2)</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">评论</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">分享</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fmousemove-mouseover-mouseout-mouseenter-mouseleave" rel="nofollow"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fzh.javascript.info%2Fmousemove-mouseover-mouseout-mouseenter-mouseleave" rel="nofollow"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/javascript-tutorial/zh.javascript.info/blob/master/2-ui/3-event-details/3-mousemove-mouseover-mouseout-mouseenter-mouseleave" rel="nofollow">在 GitHub 上编辑</a></div></div></div></div></div></div><div class="page-footer"><ul class="page-footer__list"><li class="page-footer__item page-footer__item_copy">©&nbsp;2007—2022&nbsp; Ilya Kantor</li><li class="page-footer__item page-footer__item_about"><a class="page-footer__link" href="../about/index.html">关于本项目</a></li><li class="page-footer__item page-footer__item_contact"><a class="page-footer__link" href="../about/index.html#contact-us">联系我们</a></li></ul></div></body></html>