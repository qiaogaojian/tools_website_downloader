<!DOCTYPE html><html lang="zh" data-theme-enabled="1"><head><script>window.currentUser = null;</script><script>window.rateUsdToNative = 6.3589;</script><title itemprop="name">èµ„æºåŠ è½½ï¼šonloadï¼Œonerror</title><link href="../pack/styles.e61986aaa5d558f47fd2.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><!-- chrome autotranslate is enabled only for "en" main version--><meta name="google" content="notranslate"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="//fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="../img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="https://zh.javascript.info/onload-onerror"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="../img/favicon/favicon.png"><meta itemprop="image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="èµ„æºåŠ è½½ï¼šonloadï¼Œonerror"><meta property="og:image" content="../img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="èµ„æºåŠ è½½ï¼šonloadï¼Œonerror"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="/script-async-defer"><link rel="next" href="/ui-misc"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 65598091;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="https://www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="//mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";</script><script src="../pack/init.f551d10c469632252be6.js"></script><script src="../pack/head.7c4dbce7f0d4e5d1865e.js" defer></script><meta property="og:title" content="èµ„æºåŠ è½½ï¼šonloadï¼Œonerror"><meta property="og:type" content="article"><script src="../pack/tutorial.0085805d53a665cf3a7e.js" defer></script><script src="../pack/footer.b5edaae5b6e4efe79394.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if IE]><div style="color:red;text-align:center">å¾ˆæŠ±æ­‰ï¼Œæˆ‘ä»¬ä¸æ”¯æŒ Internet Explorer ç­‰æµè§ˆå™¨ï¼Œè¯·ä½¿ç”¨ä¸€ä¸ªæ›´æ–°ç‰ˆæœ¬çš„æµè§ˆå™¨ã€‚</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><script>window.langs = [{"code":"ar","name":"Arabic"},{"code":"az","name":"Azerbaijani"},{"code":"bg","name":"Bulgarian"},{"code":"bn","name":"Bengali"},{"code":"bs","name":"Bosnian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fa","name":"Persian (Farsi)"},{"code":"fi","name":"Finnish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hi","name":"Hindi"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"hy","name":"Armenian"},{"code":"id","name":"Indonesian"},{"code":"it","name":"Italian"},{"code":"ja","name":"Japanese"},{"code":"ka","name":"Georgian"},{"code":"kk","name":"Kazakh"},{"code":"km","name":"Central Khmer"},{"code":"ko","name":"Korean"},{"code":"lt","name":"Lithuanian"},{"code":"me","name":"Montenegrin"},{"code":"ml","name":"Malayalam"},{"code":"my","name":"Burmese"},{"code":"nl","name":"Dutch"},{"code":"no","name":"Norvegian"},{"code":"pa","name":"Punjabi"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"ru","name":"Russian"},{"code":"si","name":"Sinhala"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovenian"},{"code":"sq","name":"Albanian"},{"code":"sr","name":"Serbian"},{"code":"ta","name":"Tamil"},{"code":"te","name":"Telugu"},{"code":"test","name":"Test"},{"code":"th","name":"Thai"},{"code":"tk","name":"Turkmen"},{"code":"tr","name":"Turkish"},{"code":"uk","name":"Ukrainian"},{"code":"ur","name":"Urdu"},{"code":"uz","name":"Uzbek"},{"code":"v2","name":"v2"},{"code":"vi","name":"Vietnamese"},{"code":"zh-hant","name":"Chinese Traditional"},{"code":"zh","name":"Chinese"}];</script><script>window.lang = "zh";</script><script>{let t=navigator.languages||[];t=t.map(t=>t.toLowerCase());let o,i,n=[];for(let o of window.langs)for(let i of t)if(i===o.code||i.startsWith(o.code+"-")){n.push(o);break}if(!o&&"ru"!=lang&&"en"!=lang){n.find(t=>"en"==t.code)&&(o=`\n            According to your browser headers, you know English. Please help to <a href="https://github.com/javascript-tutorial/${lang}.javascript.info#readme">translate the tutorial</a>.\n            Thank you!\n          `,i="notify-translate-tutorial-local")}if(o){let t=`<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${i}">\n          <div class="notification__content">${o}</div>\n          <button class="notification__close" title="Close"></button>\n        </div>`;document.write(t),showTopNotification()}}</script><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>ZH</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__container"><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ar.javascript.info/"><span class="supported-langs__brief">AR</span><span class="supported-langs__title">Ø¹Ø±Ø¨ÙŠ</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://javascript.info/onload-onerror"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://es.javascript.info/onload-onerror"><span class="supported-langs__brief">ES</span><span class="supported-langs__title">EspaÃ±ol</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fr.javascript.info/onload-onerror"><span class="supported-langs__brief">FR</span><span class="supported-langs__title">FranÃ§ais</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://id.javascript.info/"><span class="supported-langs__brief">ID</span><span class="supported-langs__title">Indonesia</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://it.javascript.info/onload-onerror"><span class="supported-langs__brief">IT</span><span class="supported-langs__title">Italiano</span></a></li></ul><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ja.javascript.info/onload-onerror"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">æ—¥æœ¬èª</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ko.javascript.info/"><span class="supported-langs__brief">KO</span><span class="supported-langs__title">í•œêµ­ì–´</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://learn.javascript.ru/onload-onerror"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Ğ ÑƒÑÑĞºĞ¸Ğ¹</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://tr.javascript.info/"><span class="supported-langs__brief">TR</span><span class="supported-langs__title">TÃ¼rkÃ§e</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://uk.javascript.info/onload-onerror"><span class="supported-langs__brief">UK</span><span class="supported-langs__title">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="index.html"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">ç®€ä½“ä¸­æ–‡</span></a></li></ul></div><div class="supported-langs__text">æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸ªå¼€æºé¡¹ç›®æä¾›ç»™å…¨ä¸–ç•Œçš„äººã€‚è¯·å¸®åŠ©æˆ‘ä»¬å°†æ•™ç¨‹çš„å†…å®¹ <a href="https://github.com/javascript-tutorial/translate" rel="noopener noreferrer" target="_blank">ç¿»è¯‘ä¸ºä½ æ‰€æŒæ¡çš„è¯­è¨€</a> å¯¹åº”çš„ç‰ˆæœ¬ã€‚</div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="../index.html"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="../img/sitetoolbar__logo_en.svg" width="200" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_normal sitetoolbar__logo_dark" src="../img/sitetoolbar__logo_en-white.svg" width="200" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_small" src="../img/sitetoolbar__logo_small_en.svg" width="70" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_small sitetoolbar__logo_dark" src="../img/sitetoolbar__logo_small_en-white.svg" width="70" alt role="presentation"><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="../ebook/index.html"><span class="buy-book-button__extra-text">è´­ä¹°</span>EPUB/PDF</a></div><div class="sitetoolbar__theme-switcher"><div class="theme-changer"><label class="theme-changer__label" for="theme-changer-input" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span></label></div></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><button class="sitetoolbar__search-toggle" type="button"></button><form class="sitetoolbar__search" method="GET" action="/search"><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="åœ¨ Javascript.info ç½‘ç«™ä¸­æœç´¢" required="required" type="text"></div><button class="sitetoolbar__find" type="submit">æœç´¢</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="åœ¨æ•™ç¨‹ä¸­æœç´¢" required="required"><button class="tablet-menu-search__button" type="submit" name="type" value="articles">æœç´¢</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map"><span class="map__text">æ•™ç¨‹è·¯çº¿å›¾</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="theme-changer theme-changer_tablet-menu theme-changer_has-label"><label class="theme-changer__label" for="theme-changer-input-tablet" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input-tablet" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span><span class="theme-changer__label-text theme-changer__label-text_light-theme">Light theme</span><span class="theme-changer__label-text theme-changer__label-text_dark-theme">Dark theme</span></label></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">åˆ†äº«</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fonload-onerror" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fonload-onerror" rel="nofollow"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://ar.javascript.info/">Ø¹Ø±Ø¨ÙŠ</option><option value="https://javascript.info/onload-onerror">English</option><option value="https://es.javascript.info/onload-onerror">EspaÃ±ol</option><option value="https://fr.javascript.info/onload-onerror">FranÃ§ais</option><option value="https://id.javascript.info/">Indonesia</option><option value="https://it.javascript.info/onload-onerror">Italiano</option><option value="https://ja.javascript.info/onload-onerror">æ—¥æœ¬èª</option><option value="https://ko.javascript.info/">í•œêµ­ì–´</option><option value="https://learn.javascript.ru/onload-onerror">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option><option value="https://tr.javascript.info/">TÃ¼rkÃ§e</option><option value="https://uk.javascript.info/onload-onerror">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option><option value="https://zh.javascript.info/onload-onerror" selected>ç®€ä½“ä¸­æ–‡</option></select></div></div></div><progress class="tutorial-progress" data-sticky value="29" max="32" data-tooltip="ç¬¬ 29/32 èŠ‚"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");let e=document.querySelector(".page-wrapper");e&&e.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")});</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><div class="main__header-group"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home"><a class="breadcrumbs__link" href="../index.html"><span class="breadcrumbs__hidden-text">æ•™ç¨‹</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1"><a class="breadcrumbs__link" href="../ui/index.html"><span>æµè§ˆå™¨ï¼šæ–‡æ¡£ï¼Œäº‹ä»¶ï¼Œæ¥å£</span></a></li><li class="breadcrumbs__item" id="breadcrumb-2"><a class="breadcrumbs__link" href="../loading/index.html"><span>åŠ è½½æ–‡æ¡£å’Œå…¶ä»–èµ„æº</span></a></li><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ•™ç¨‹","item":"https://zh.javascript.info/"},{"@type":"ListItem","position":2,"name":"æµè§ˆå™¨ï¼šæ–‡æ¡£ï¼Œäº‹ä»¶ï¼Œæ¥å£","item":"https://zh.javascript.info/ui"},{"@type":"ListItem","position":3,"name":"åŠ è½½æ–‡æ¡£å’Œå…¶ä»–èµ„æº","item":"https://zh.javascript.info/loading"}]}</script></ol><div class="updated-at" data-tooltip="æœ€åä¿®æ”¹åœ¨ 13æ—¥ åä¸€æœˆ 2020"><div class="updated-at__content">13æ—¥ åä¸€æœˆ 2020</div></div></div><h1 class="main__header-title">èµ„æºåŠ è½½ï¼šonloadï¼Œonerror</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="èµ„æºåŠ è½½ï¼šonloadï¼Œonerror"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>æµè§ˆå™¨å…è®¸æˆ‘ä»¬è·Ÿè¸ªå¤–éƒ¨èµ„æºçš„åŠ è½½ â€”â€” è„šæœ¬ï¼Œiframeï¼Œå›¾ç‰‡ç­‰ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªäº‹ä»¶ï¼š</p>
<ul>
<li><code>onload</code> â€”â€” æˆåŠŸåŠ è½½ï¼Œ</li>
<li><code>onerror</code> â€”â€” å‡ºç° errorã€‚</li>
</ul>
<h2><a class="main__anchor" name="jia-zai-jiao-ben" href="#jia-zai-jiao-ben">åŠ è½½è„šæœ¬</a></h2><p>å‡è®¾æˆ‘ä»¬éœ€è¦åŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œå¹¶è°ƒç”¨å…¶ä¸­çš„å‡½æ•°ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åŠ¨æ€åŠ è½½å®ƒï¼š</p>
<div id="ntmpaur42a" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let script = document.createElement('script');
script.src = &quot;my.js&quot;;

document.head.append(script);</code></pre>
        </div>
      </div>
      
      </div><p>â€¦â€¦ä½†å¦‚ä½•è¿è¡Œåœ¨è¯¥è„šæœ¬ä¸­å£°æ˜çš„å‡½æ•°ï¼Ÿæˆ‘ä»¬éœ€è¦ç­‰åˆ°è¯¥è„šæœ¬åŠ è½½å®Œæˆï¼Œä¹‹åæ‰èƒ½è°ƒç”¨å®ƒã€‚</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">è¯·æ³¨æ„ï¼š</span></div>
            <div class="important__content"><p>å¯¹äºæˆ‘ä»¬è‡ªå·±çš„è„šæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ <a href="../modules/index.html">JavaScript module</a>ï¼Œä½†æ˜¯å®ƒä»¬å¹¶æœªè¢«å¹¿æ³›åº”ç”¨äºç¬¬ä¸‰æ–¹åº“ã€‚</p>
</div></div>
<h3><a class="main__anchor" name="scriptonload" href="#scriptonload">script.onload</a></h3><p>æˆ‘ä»¬çš„å¾—åŠ›åŠ©æ‰‹æ˜¯ <code>load</code> äº‹ä»¶ã€‚å®ƒä¼šåœ¨è„šæœ¬åŠ è½½å¹¶æ‰§è¡Œå®Œæˆæ—¶è§¦å‘ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div id="o97nmgq4ad" data-trusted="0" class="code-example" data-highlight="[{&quot;start&quot;:6,&quot;end&quot;:9}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let script = document.createElement('script');

// å¯ä»¥ä»ä»»æ„åŸŸï¼ˆdomainï¼‰ï¼ŒåŠ è½½ä»»æ„è„šæœ¬
script.src = &quot;https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.3.0/lodash.js&quot;
document.head.append(script);

script.onload = function() {
  // è¯¥è„šæœ¬åˆ›å»ºäº†ä¸€ä¸ªå˜é‡ &quot;_&quot;
  alert( _.VERSION ); // æ˜¾ç¤ºåº“çš„ç‰ˆæœ¬
};</code></pre>
        </div>
      </div>
      
      </div><p>å› æ­¤ï¼Œåœ¨ <code>onload</code> ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è„šæœ¬ä¸­çš„å˜é‡ï¼Œè¿è¡Œå‡½æ•°ç­‰ã€‚</p>
<p>â€¦â€¦å¦‚æœåŠ è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚ï¼Œè¿™é‡Œæ²¡æœ‰è¿™æ ·çš„è„šæœ¬ï¼ˆerror 404ï¼‰æˆ–è€…æœåŠ¡å™¨å®•æœºï¼ˆä¸å¯ç”¨ï¼‰ã€‚</p>
<h3><a class="main__anchor" name="scriptonerror" href="#scriptonerror">script.onerror</a></h3><p>å‘ç”Ÿåœ¨è„šæœ¬åŠ è½½æœŸé—´çš„ error ä¼šè¢« <code>error</code> äº‹ä»¶è·Ÿè¸ªåˆ°ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¯·æ±‚ä¸€ä¸ªä¸å­˜åœ¨çš„è„šæœ¬ï¼š</p>
<div id="rykc2sbqcy" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:4,&quot;end&quot;:6}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let script = document.createElement('script');
script.src = &quot;https://example.com/404.js&quot;; // æ²¡æœ‰è¿™ä¸ªè„šæœ¬
document.head.append(script);

script.onerror = function() {
  alert(&quot;Error loading &quot; + this.src); // Error loading https://example.com/404.js
};</code></pre>
        </div>
      </div>
      
      </div><p>è¯·æ³¨æ„ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ— æ³•è·å–æ›´å¤š HTTP error çš„è¯¦ç»†ä¿¡æ¯ã€‚æˆ‘ä»¬ä¸çŸ¥é“ error æ˜¯ 404 è¿˜æ˜¯ 500 æˆ–è€…å…¶ä»–æƒ…å†µã€‚åªçŸ¥é“æ˜¯åŠ è½½å¤±è´¥äº†ã€‚</p>
<div class="important important_warn">
            <div class="important__header"><span class="important__type">é‡è¦ï¼š</span></div>
            <div class="important__content"><p><code>onload</code>/<code>onerror</code> äº‹ä»¶ä»…è·Ÿè¸ªåŠ è½½æœ¬èº«ã€‚</p>
<p>åœ¨è„šæœ¬å¤„ç†å’Œæ‰§è¡ŒæœŸé—´å¯èƒ½å‘ç”Ÿçš„ error è¶…å‡ºäº†è¿™äº›äº‹ä»¶è·Ÿè¸ªçš„èŒƒå›´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœè„šæœ¬æˆåŠŸåŠ è½½ï¼Œåˆ™å³ä½¿è„šæœ¬ä¸­æœ‰ç¼–ç¨‹ errorï¼Œä¹Ÿä¼šè§¦å‘ <code>onload</code> äº‹ä»¶ã€‚å¦‚æœè¦è·Ÿè¸ªè„šæœ¬ errorï¼Œå¯ä»¥ä½¿ç”¨ <code>window.onerror</code> å…¨å±€å¤„ç†ç¨‹åºã€‚</p>
</div></div>
<h2><a class="main__anchor" name="qi-ta-zi-yuan" href="#qi-ta-zi-yuan">å…¶ä»–èµ„æº</a></h2><p><code>load</code> å’Œ <code>error</code> äº‹ä»¶ä¹Ÿé€‚ç”¨äºå…¶ä»–èµ„æºï¼ŒåŸºæœ¬ä¸Šï¼ˆbasicallyï¼‰é€‚ç”¨äºå…·æœ‰å¤–éƒ¨ <code>src</code> çš„ä»»ä½•èµ„æºã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div id="1cou8ys4y1" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let img = document.createElement('img');
img.src = &quot;https://js.cx/clipart/train.gif&quot;; // (*)

img.onload = function() {
  alert(`Image loaded, size ${img.width}x${img.height}`);
};

img.onerror = function() {
  alert(&quot;Error occurred while loading image&quot;);
};</code></pre>
        </div>
      </div>
      
      </div><p>ä½†æ˜¯æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>å¤§å¤šæ•°èµ„æºåœ¨è¢«æ·»åŠ åˆ°æ–‡æ¡£ä¸­åï¼Œä¾¿å¼€å§‹åŠ è½½ã€‚ä½†æ˜¯ <code>&lt;img&gt;</code> æ˜¯ä¸ªä¾‹å¤–ã€‚å®ƒè¦ç­‰åˆ°è·å¾— src <code>(*)</code> åæ‰å¼€å§‹åŠ è½½ã€‚</li>
<li>å¯¹äº <code>&lt;iframe&gt;</code> æ¥è¯´ï¼Œiframe åŠ è½½å®Œæˆæ—¶ä¼šè§¦å‘ <code>iframe.onload</code> äº‹ä»¶ï¼Œæ— è®ºæ˜¯æˆåŠŸåŠ è½½è¿˜æ˜¯å‡ºç° errorã€‚</li>
</ul>
<p>è¿™æ˜¯å‡ºäºå†å²åŸå› ã€‚</p>
<h2><a class="main__anchor" name="kua-yuan-ce-lve" href="#kua-yuan-ce-lve">è·¨æºç­–ç•¥</a></h2><p>è¿™é‡Œæœ‰ä¸€æ¡è§„åˆ™ï¼šæ¥è‡ªä¸€ä¸ªç½‘ç«™çš„è„šæœ¬æ— æ³•è®¿é—®å…¶ä»–ç½‘ç«™çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œä½äº <code>https://facebook.com</code> çš„è„šæœ¬æ— æ³•è¯»å–ä½äº <code>https://gmail.com</code> çš„ç”¨æˆ·é‚®ç®±ã€‚</p>
<p>æˆ–è€…ï¼Œæ›´ç¡®åˆ‡åœ°è¯´ï¼Œä¸€ä¸ªæºï¼ˆåŸŸ/ç«¯å£/åè®®ä¸‰è€…ï¼‰æ— æ³•è·å–å¦ä¸€ä¸ªæºï¼ˆoriginï¼‰çš„å†…å®¹ã€‚å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬æœ‰ä¸€ä¸ªå­åŸŸï¼Œæˆ–è€…ä»…ä»…æ˜¯å¦ä¸€ä¸ªç«¯å£ï¼Œè¿™éƒ½æ˜¯ä¸åŒçš„æºï¼Œå½¼æ­¤æ— æ³•ç›¸äº’è®¿é—®ã€‚</p>
<p>è¿™ä¸ªè§„åˆ™è¿˜å½±å“å…¶ä»–åŸŸçš„èµ„æºã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ¥è‡ªå…¶ä»–åŸŸçš„è„šæœ¬ï¼Œå¹¶ä¸”è¯¥è„šæœ¬ä¸­å­˜åœ¨ errorï¼Œé‚£ä¹ˆæˆ‘ä»¬æ— æ³•è·å– error çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªè„šæœ¬ <code>error.js</code>ï¼Œè¯¥è„šæœ¬åªåŒ…å«ä¸€ä¸ªï¼ˆé”™è¯¯ï¼‰å‡½æ•°è°ƒç”¨ï¼š</p>
<div id="m78tqs6100" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// ğŸ“ error.js
noSuchFunction();</code></pre>
        </div>
      </div>
      
      </div><p>ç°åœ¨ä»å®ƒæ‰€åœ¨çš„åŒä¸€ä¸ªç½‘ç«™åŠ è½½å®ƒï¼š</p>
<div id="52bek7qx7f" data-trusted="1" class="code-example" data-demo-height="0">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="å±•ç¤º" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;script&gt;
window.onerror = function(message, url, line, col, errorObj) {
  alert(`${message}\n${url}, ${line}:${col}`);
};
&lt;/script&gt;
&lt;script src=&quot;/article/onload-onerror/crossorigin/error.js&quot;&gt;&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¾ˆå¥½çš„ error æŠ¥å‘Šï¼Œå°±åƒè¿™æ ·ï¼š</p>
<div id="zajmtqje1v" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-none"><code>Uncaught ReferenceError: noSuchFunction is not defined
https://javascript.info/article/onload-onerror/crossorigin/error.js, 1:1</code></pre>
        </div>
      </div>
      
      </div><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä»å¦ä¸€ä¸ªåŸŸä¸­åŠ è½½ç›¸åŒçš„è„šæœ¬ï¼š</p>
<div id="8bpuop3ecf" data-trusted="1" class="code-example" data-demo-height="0">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="å±•ç¤º" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;script&gt;
window.onerror = function(message, url, line, col, errorObj) {
  alert(`${message}\n${url}, ${line}:${col}`);
};
&lt;/script&gt;
&lt;script src=&quot;https://cors.javascript.info/article/onload-onerror/crossorigin/error.js&quot;&gt;&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><p>æ­¤æŠ¥å‘Šä¸ä¸Šé¢é‚£ä¸ªç¤ºä¾‹ä¸­çš„ä¸åŒï¼Œå°±åƒè¿™æ ·ï¼š</p>
<div id="mwp5d27en2" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-none"><code>Script error.
, 0:0</code></pre>
        </div>
      </div>
      
      </div><p>error çš„è¯¦ç»†ä¿¡æ¯å¯èƒ½å› æµè§ˆå™¨è€Œå¼‚ï¼Œä½†æ˜¯åŸç†æ˜¯ç›¸åŒçš„ï¼šæœ‰å…³è„šæœ¬å†…éƒ¨çš„ä»»ä½•ä¿¡æ¯ï¼ˆåŒ…æ‹¬ error å †æ ˆè·Ÿè¸ªï¼‰éƒ½è¢«éšè—äº†ã€‚æ­£æ˜¯å› ä¸ºå®ƒæ¥è‡ªäºå¦ä¸€ä¸ªåŸŸã€‚</p>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ error çš„è¯¦ç»†ä¿¡æ¯ï¼Ÿ</p>
<p>å› ä¸ºæœ‰å¾ˆå¤šæœåŠ¡ï¼ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥æ„å»ºè‡ªå·±çš„æœåŠ¡ï¼‰ä½¿ç”¨ <code>window.onerror</code> ç›‘å¬å…¨å±€ errorï¼Œä¿å­˜ error å¹¶æä¾›è®¿é—®å’Œåˆ†æ error çš„æ¥å£ã€‚è¿™å¾ˆå¥½ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”±ç”¨æˆ·è§¦å‘çš„å®é™…ä¸­çš„ errorã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªè„šæœ¬æ¥è‡ªäºå¦ä¸€ä¸ªæºï¼ˆoriginï¼‰ï¼Œé‚£ä¹ˆæ­£å¦‚æˆ‘ä»¬åˆšåˆšçœ‹åˆ°çš„é‚£æ ·ï¼Œå…¶ä¸­æ²¡æœ‰å¤ªå¤šæœ‰å…³ error çš„ä¿¡æ¯ã€‚</p>
<p>å¯¹å…¶ä»–ç±»å‹çš„èµ„æºä¹Ÿæ‰§è¡Œç±»ä¼¼çš„è·¨æºç­–ç•¥ï¼ˆCORSï¼‰ã€‚</p>
<p><strong>è¦å…è®¸è·¨æºè®¿é—®ï¼Œ<code>&lt;script&gt;</code> æ ‡ç­¾éœ€è¦å…·æœ‰ <code>crossorigin</code> ç‰¹æ€§ï¼ˆattributeï¼‰ï¼Œå¹¶ä¸”è¿œç¨‹æœåŠ¡å™¨å¿…é¡»æä¾›ç‰¹æ®Šçš„ headerã€‚</strong></p>
<p>è¿™é‡Œæœ‰ä¸‰ä¸ªçº§åˆ«çš„è·¨æºè®¿é—®ï¼š</p>
<ol>
<li><strong>æ—  <code>crossorigin</code> ç‰¹æ€§</strong> â€”â€” ç¦æ­¢è®¿é—®ã€‚</li>
<li><strong><code>crossorigin=&quot;anonymous&quot;</code></strong> â€”â€” å¦‚æœæœåŠ¡å™¨çš„å“åº”å¸¦æœ‰åŒ…å« <code>*</code> æˆ–æˆ‘ä»¬çš„æºï¼ˆoriginï¼‰çš„ header <code>Access-Control-Allow-Origin</code>ï¼Œåˆ™å…è®¸è®¿é—®ã€‚æµè§ˆå™¨ä¸ä¼šå°†æˆæƒä¿¡æ¯å’Œ cookie å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚</li>
<li><strong><code>crossorigin=&quot;use-credentials&quot;</code></strong> â€”â€” å¦‚æœæœåŠ¡å™¨å‘é€å›å¸¦æœ‰æˆ‘ä»¬çš„æºçš„ header <code>Access-Control-Allow-Origin</code> å’Œ <code>Access-Control-Allow-Credentials: true</code>ï¼Œåˆ™å…è®¸è®¿é—®ã€‚æµè§ˆå™¨ä¼šå°†æˆæƒä¿¡æ¯å’Œ cookie å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚</li>
</ol>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">è¯·æ³¨æ„ï¼š</span></div>
            <div class="important__content"><p>ä½ å¯ä»¥åœ¨ <a href="../fetch-crossorigin/index.html">Fetchï¼šè·¨æºè¯·æ±‚</a> ä¸€ç« ä¸­äº†è§£æœ‰å…³è·¨æºè®¿é—®çš„æ›´å¤šä¿¡æ¯ã€‚è¿™ä¸€ç« æè¿°äº†ç”¨äºç½‘ç»œè¯·æ±‚çš„ <code>fetch</code> æ–¹æ³•ï¼Œä½†ç­–ç•¥æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚</p>
<p>è¯¸å¦‚ â€œcookieâ€ ä¹‹ç±»çš„å†…å®¹è¶…å‡ºäº†æœ¬ç« çš„èŒƒå›´ï¼Œä½†ä½ å¯ä»¥åœ¨ <a href="../cookie/index.html">Cookieï¼Œdocument.cookie</a> ä¸€ç« å­¦ä¹ å®ƒä»¬ã€‚</p>
</div></div>
<p>åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­æ²¡æœ‰ä»»ä½•è·¨æºç‰¹æ€§ï¼ˆattributeï¼‰ã€‚å› æ­¤ï¼Œè·¨æºè®¿é—®è¢«ç¦æ­¢ã€‚è®©æˆ‘ä»¬æ¥æ·»åŠ å®ƒå§ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>&quot;anonymous&quot;</code>ï¼ˆä¸ä¼šå‘é€ cookieï¼Œéœ€è¦ä¸€ä¸ªæœåŠ¡å™¨ç«¯çš„ headerï¼‰å’Œ <code>&quot;use-credentials&quot;</code>ï¼ˆä¼šå‘é€ cookieï¼Œéœ€è¦ä¸¤ä¸ªæœåŠ¡å™¨ç«¯çš„ headerï¼‰ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒ cookieï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹© <code>&quot;anonymous&quot;</code>ï¼š</p>
<div id="f49xrtwzd6" data-trusted="1" class="code-example" data-demo-height="0" data-highlight="[{&quot;start&quot;:5,&quot;cols&quot;:[{&quot;start&quot;:8,&quot;end&quot;:31}]}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="å±•ç¤º" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;script&gt;
window.onerror = function(message, url, line, col, errorObj) {
  alert(`${message}\n${url}, ${line}:${col}`);
};
&lt;/script&gt;
&lt;script crossorigin=&quot;anonymous&quot; src=&quot;https://cors.javascript.info/article/onload-onerror/crossorigin/error.js&quot;&gt;&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><p>ç°åœ¨ï¼Œå‡è®¾æœåŠ¡å™¨æä¾›äº† <code>Access-Control-Allow-Origin</code> headerï¼Œä¸€åˆ‡éƒ½æ­£å¸¸ã€‚æˆ‘ä»¬æœ‰äº†å®Œæ•´çš„ error æŠ¥å‘Šã€‚</p>
<h2><a class="main__anchor" name="zong-jie" href="#zong-jie">æ€»ç»“</a></h2><p>å›¾ç‰‡ <code>&lt;img&gt;</code>ï¼Œå¤–éƒ¨æ ·å¼ï¼Œè„šæœ¬å’Œå…¶ä»–èµ„æºéƒ½æä¾›äº† <code>load</code> å’Œ <code>error</code> äº‹ä»¶ä»¥è·Ÿè¸ªå®ƒä»¬çš„åŠ è½½ï¼š</p>
<ul>
<li><code>load</code> åœ¨æˆåŠŸåŠ è½½æ—¶è¢«è§¦å‘ã€‚</li>
<li><code>error</code> åœ¨åŠ è½½å¤±è´¥æ—¶è¢«è§¦å‘ã€‚</li>
</ul>
<p>å”¯ä¸€çš„ä¾‹å¤–æ˜¯ <code>&lt;iframe&gt;</code>ï¼šå‡ºäºå†å²åŸå› ï¼Œä¸ç®¡åŠ è½½æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå³ä½¿é¡µé¢æ²¡æœ‰è¢«æ‰¾åˆ°ï¼Œå®ƒéƒ½ä¼šè§¦å‘ <code>load</code> äº‹ä»¶ã€‚</p>
<p><code>readystatechange</code> äº‹ä»¶ä¹Ÿé€‚ç”¨äºèµ„æºï¼Œä½†å¾ˆå°‘è¢«ä½¿ç”¨ï¼Œå› ä¸º <code>load/error</code> äº‹ä»¶æ›´ç®€å•ã€‚</p>
</div></article><div class="tasks formatted"><h2 class="tasks__title" id="tasks"><a class="tasks__title-anchor main__anchor main__anchor main__anchor_noicon" href="#tasks">ä»»åŠ¡</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#shi-yong-hui-tiao-han-shu-jia-zai-tu-pian" name="shi-yong-hui-tiao-han-shu-jia-zai-tu-pian">ä½¿ç”¨å›è°ƒå‡½æ•°åŠ è½½å›¾ç‰‡</a></h3><a class="task__open-link" href="../task/load-img-callback/index.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="ä»»åŠ¡çš„é‡è¦ç¨‹åº¦æœ‰å¤šé«˜ï¼Œç­‰çº§ä» 1 åˆ° 5ã€‚">é‡è¦ç¨‹åº¦: 4</span></div><div class="task__content"><div class="task__formatted"><p>é€šå¸¸ï¼Œå›¾ç‰‡åœ¨è¢«åˆ›å»ºæ—¶æ‰ä¼šè¢«åŠ è½½ã€‚æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬å‘é¡µé¢ä¸­æ·»åŠ  <code>&lt;img&gt;</code> æ—¶ï¼Œç”¨æˆ·ä¸ä¼šç«‹å³çœ‹åˆ°å›¾ç‰‡ã€‚æµè§ˆå™¨é¦–å…ˆéœ€è¦åŠ è½½å®ƒã€‚</p>
<p>ä¸ºäº†ç«‹å³æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥â€œæå‰â€åˆ›å»ºå®ƒï¼Œåƒè¿™æ ·ï¼š</p>
<div id="r5brsjzfvd" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let img = document.createElement('img');
img.src = 'my.jpg';</code></pre>
        </div>
      </div>
      
      </div><p>æµè§ˆå™¨å¼€å§‹åŠ è½½å›¾ç‰‡ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°ç¼“å­˜ä¸­ã€‚ä»¥åï¼Œå½“ç›¸åŒå›¾ç‰‡å‡ºç°åœ¨æ–‡æ¡£ä¸­æ—¶ï¼ˆæ— è®ºæ€æ ·ï¼‰ï¼Œå®ƒéƒ½ä¼šç«‹å³æ˜¾ç¤ºã€‚</p>
<p><strong>åˆ›å»ºä¸€ä¸ªå‡½æ•° <code>preloadImages(sources, callback)</code>ï¼Œæ¥åŠ è½½æ¥è‡ªæ•°ç»„ <code>source</code> çš„æ‰€æœ‰å›¾ç‰‡ï¼Œå¹¶åœ¨å‡†å¤‡å°±ç»ªæ—¶è¿è¡Œ <code>callback</code>ã€‚</strong></p>
<p>ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç å°†åœ¨å›¾ç‰‡åŠ è½½å®Œæˆåæ˜¾ç¤ºä¸€ä¸ª <code>alert</code>ï¼š</p>
<div id="a6jpkixxwh" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>function loaded() {
  alert(&quot;Images loaded&quot;)
}

preloadImages([&quot;1.jpg&quot;, &quot;2.jpg&quot;, &quot;3.jpg&quot;], loaded);</code></pre>
        </div>
      </div>
      
      </div><p>å¦‚æœå‡ºç°é”™è¯¯ï¼Œå‡½æ•°åº”è¯¥ä»å‡å®šå›¾ç‰‡å·²ç»â€œåŠ è½½å®Œæˆâ€ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå½“æ‰€æœ‰å›¾ç‰‡éƒ½å·²åŠ è½½å®Œæˆï¼Œæˆ–å‡ºç°é”™è¯¯è¾“å‡ºæ—¶ï¼Œå°†æ‰§è¡Œ <code>callback</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è®¡åˆ’æ˜¾ç¤ºä¸€ä¸ªåŒ…å«å¾ˆå¤šå›¾ç‰‡çš„å¯æ»šåŠ¨å›¾å†Œï¼Œå¹¶å¸Œæœ›ç¡®ä¿æ‰€æœ‰å›¾ç‰‡éƒ½å·²åŠ è½½å®Œæˆæ—¶ï¼Œè¿™ä¸ªå‡½æ•°å¾ˆæœ‰ç”¨ã€‚</p>
<p>åœ¨æºæ–‡æ¡£ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æŒ‡å‘æµ‹è¯•å›¾ç‰‡çš„é“¾æ¥ï¼Œä»¥åŠæ£€æŸ¥å®ƒä»¬æ˜¯å¦å·²åŠ è½½å®Œæˆçš„ä»£ç ã€‚å®ƒåº”è¯¥è¾“å‡º <code>300</code>ã€‚</p>
<p><a href="https://plnkr.co/edit/A2YjseeJafHft1FB?p=preview" target="_blank" data-plunk-id="A2YjseeJafHft1FB">æ‰“å¼€ä¸€ä¸ªä»»åŠ¡æ²™ç®±ã€‚</a></p></div><button class="task__solution" type="button">è§£å†³æ–¹æ¡ˆ</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p>ç®—æ³•ï¼š</p>
<ol>
<li>ä¸ºæ¯ä¸ªèµ„æºåˆ›å»º <code>img</code>ã€‚</li>
<li>ä¸ºæ¯ä¸ªå›¾ç‰‡æ·»åŠ  <code>onload/onerror</code>ã€‚</li>
<li>åœ¨ <code>onload</code> æˆ– <code>onerror</code> è¢«è§¦å‘æ—¶ï¼Œå¢åŠ è®¡æ•°å™¨ã€‚</li>
<li>å½“è®¡æ•°å™¨å€¼ç­‰äºèµ„æºå€¼æ—¶ â€”â€” æˆ‘ä»¬å®Œæˆäº†ï¼š<code>callback()</code>ã€‚</li>
</ol>
<p><a href="https://plnkr.co/edit/wzeODTzhSt1TDUto?p=preview" target="_blank" data-plunk-id="wzeODTzhSt1TDUto">ä½¿ç”¨æ²™ç®±æ‰“å¼€è§£å†³æ–¹æ¡ˆã€‚</a></p></div></div><button class="close-button task__answer-close" type="button" title="å…³é—­"></button></div></div></div></div></div></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="../script-async-defer/index.html" data-tooltip="è„šæœ¬ï¼šasyncï¼Œdefer"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">ä¸Šä¸€èŠ‚</span></a><a class="page__nav page__nav_next" href="../ui-misc/index.html" data-tooltip="æ‚é¡¹"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">ä¸‹ä¸€èŠ‚</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">åˆ†äº«</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fonload-onerror" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fonload-onerror" rel="nofollow"></a></div><div class="article-tablet-foot__map"><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map"><span class="map__text">æ•™ç¨‹è·¯çº¿å›¾</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">è¯„è®º</a></h2><div class="comments__read-before"><span class="comments__read-before-link">åœ¨è¯„è®ºä¹‹å‰å…ˆé˜…è¯»æœ¬å†…å®¹â€¦</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>å¦‚æœä½ å‘ç°æ•™ç¨‹æœ‰é”™è¯¯ï¼Œæˆ–è€…æœ‰å…¶ä»–éœ€è¦ä¿®æ”¹å’Œæå‡çš„åœ°æ–¹ â€” è¯· <a href="https://github.com/javascript-tutorial/zh.javascript.info/issues">æäº¤ä¸€ä¸ª GitHub issue</a> æˆ– pull requestï¼Œè€Œä¸æ˜¯åœ¨è¿™è¯„è®ºã€‚</li><li>å¦‚æœä½ å¯¹æ•™ç¨‹çš„å†…å®¹æœ‰ä¸ç†è§£çš„åœ°æ–¹ â€” è¯·è¯¦ç»†è¯´æ˜ã€‚</li><li>ä½¿ç”¨ <code>&lt;code&gt;</code> æ ‡ç­¾æ’å…¥åªæœ‰å‡ ä¸ªè¯çš„ä»£ç ï¼Œæ’å…¥å¤šè¡Œä»£ç å¯ä»¥ä½¿ç”¨ <code>&lt;pre&gt;</code> æ ‡ç­¾ï¼Œå¯¹äºè¶…è¿‡ 10 è¡Œçš„ä»£ç ï¼Œå»ºè®®ä½ ä½¿ç”¨æ²™ç®±ï¼ˆ<a href="https://plnkr.co/edit/?p=preview">plnkr</a>ï¼Œ<a href="https://jsbin.com">JSBin</a>ï¼Œ<a href="http://codepen.io">codepen</a>â€¦ï¼‰</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/zh.javascript.info\/onload-onerror","identifier":"\/onload-onerror"}); };</script><script>var disqus_shortname = "zh-javascript-info";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map" data-tooltip="æ•™ç¨‹è·¯çº¿å›¾"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">ç« èŠ‚</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="../loading/index.html">åŠ è½½æ–‡æ¡£å’Œå…¶ä»–èµ„æº</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">è¯¾ç¨‹å¯¼èˆª</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#jia-zai-jiao-ben">åŠ è½½è„šæœ¬</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#qi-ta-zi-yuan">å…¶ä»–èµ„æº</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#kua-yuan-ce-lve">è·¨æºç­–ç•¥</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#zong-jie">æ€»ç»“</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#tasks">ä»»åŠ¡ (1)</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">è¯„è®º</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">åˆ†äº«</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fonload-onerror" rel="nofollow"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fzh.javascript.info%2Fonload-onerror" rel="nofollow"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/javascript-tutorial/zh.javascript.info/blob/master/2-ui/5-loading/03-onload-onerror" rel="nofollow">åœ¨ GitHub ä¸Šç¼–è¾‘</a></div></div></div></div></div></div><div class="page-footer"><ul class="page-footer__list"><li class="page-footer__item page-footer__item_copy">Â©&nbsp;2007â€”2022&nbsp; Ilya Kantor</li><li class="page-footer__item page-footer__item_about"><a class="page-footer__link" href="../about/index.html">å…³äºæœ¬é¡¹ç›®</a></li><li class="page-footer__item page-footer__item_contact"><a class="page-footer__link" href="../about/index.html#contact-us">è”ç³»æˆ‘ä»¬</a></li></ul></div></body></html>