<!DOCTYPE html><html lang="zh" data-theme-enabled="1"><head><script>window.currentUser = null;</script><script>window.rateUsdToNative = 6.3589;</script><title itemprop="name">元素大小和滚动</title><link href="../pack/styles.e61986aaa5d558f47fd2.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><!-- chrome autotranslate is enabled only for "en" main version--><meta name="google" content="notranslate"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="//fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="../img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="https://zh.javascript.info/size-and-scroll"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="../img/favicon/favicon.png"><meta itemprop="image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="元素大小和滚动"><meta property="og:image" content="../img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="元素大小和滚动"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="/styles-and-classes"><link rel="next" href="/size-and-scroll-window"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 65598091;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="https://www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="//mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";</script><script src="../pack/init.f551d10c469632252be6.js"></script><script src="../pack/head.7c4dbce7f0d4e5d1865e.js" defer></script><meta property="og:title" content="元素大小和滚动"><meta property="og:type" content="article"><script src="../pack/tutorial.0085805d53a665cf3a7e.js" defer></script><script src="../pack/footer.b5edaae5b6e4efe79394.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if IE]><div style="color:red;text-align:center">很抱歉，我们不支持 Internet Explorer 等浏览器，请使用一个更新版本的浏览器。</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><script>window.langs = [{"code":"ar","name":"Arabic"},{"code":"az","name":"Azerbaijani"},{"code":"bg","name":"Bulgarian"},{"code":"bn","name":"Bengali"},{"code":"bs","name":"Bosnian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fa","name":"Persian (Farsi)"},{"code":"fi","name":"Finnish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hi","name":"Hindi"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"hy","name":"Armenian"},{"code":"id","name":"Indonesian"},{"code":"it","name":"Italian"},{"code":"ja","name":"Japanese"},{"code":"ka","name":"Georgian"},{"code":"kk","name":"Kazakh"},{"code":"km","name":"Central Khmer"},{"code":"ko","name":"Korean"},{"code":"lt","name":"Lithuanian"},{"code":"me","name":"Montenegrin"},{"code":"ml","name":"Malayalam"},{"code":"my","name":"Burmese"},{"code":"nl","name":"Dutch"},{"code":"no","name":"Norvegian"},{"code":"pa","name":"Punjabi"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"ru","name":"Russian"},{"code":"si","name":"Sinhala"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovenian"},{"code":"sq","name":"Albanian"},{"code":"sr","name":"Serbian"},{"code":"ta","name":"Tamil"},{"code":"te","name":"Telugu"},{"code":"test","name":"Test"},{"code":"th","name":"Thai"},{"code":"tk","name":"Turkmen"},{"code":"tr","name":"Turkish"},{"code":"uk","name":"Ukrainian"},{"code":"ur","name":"Urdu"},{"code":"uz","name":"Uzbek"},{"code":"v2","name":"v2"},{"code":"vi","name":"Vietnamese"},{"code":"zh-hant","name":"Chinese Traditional"},{"code":"zh","name":"Chinese"}];</script><script>window.lang = "zh";</script><script>{let t=navigator.languages||[];t=t.map(t=>t.toLowerCase());let o,i,n=[];for(let o of window.langs)for(let i of t)if(i===o.code||i.startsWith(o.code+"-")){n.push(o);break}if(!o&&"ru"!=lang&&"en"!=lang){n.find(t=>"en"==t.code)&&(o=`\n            According to your browser headers, you know English. Please help to <a href="https://github.com/javascript-tutorial/${lang}.javascript.info#readme">translate the tutorial</a>.\n            Thank you!\n          `,i="notify-translate-tutorial-local")}if(o){let t=`<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${i}">\n          <div class="notification__content">${o}</div>\n          <button class="notification__close" title="Close"></button>\n        </div>`;document.write(t),showTopNotification()}}</script><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>ZH</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__container"><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ar.javascript.info/size-and-scroll"><span class="supported-langs__brief">AR</span><span class="supported-langs__title">عربي</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://javascript.info/size-and-scroll"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://es.javascript.info/size-and-scroll"><span class="supported-langs__brief">ES</span><span class="supported-langs__title">Español</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fr.javascript.info/size-and-scroll"><span class="supported-langs__brief">FR</span><span class="supported-langs__title">Français</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://id.javascript.info/"><span class="supported-langs__brief">ID</span><span class="supported-langs__title">Indonesia</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://it.javascript.info/size-and-scroll"><span class="supported-langs__brief">IT</span><span class="supported-langs__title">Italiano</span></a></li></ul><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ja.javascript.info/size-and-scroll"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">日本語</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ko.javascript.info/size-and-scroll"><span class="supported-langs__brief">KO</span><span class="supported-langs__title">한국어</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://learn.javascript.ru/size-and-scroll"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Русский</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://tr.javascript.info/size-and-scroll"><span class="supported-langs__brief">TR</span><span class="supported-langs__title">Türkçe</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://uk.javascript.info/"><span class="supported-langs__brief">UK</span><span class="supported-langs__title">Українська</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="index.html"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">简体中文</span></a></li></ul></div><div class="supported-langs__text">我们希望将这个开源项目提供给全世界的人。请帮助我们将教程的内容 <a href="https://github.com/javascript-tutorial/translate" rel="noopener noreferrer" target="_blank">翻译为你所掌握的语言</a> 对应的版本。</div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="../index.html"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="../img/sitetoolbar__logo_en.svg" width="200" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_normal sitetoolbar__logo_dark" src="../img/sitetoolbar__logo_en-white.svg" width="200" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_small" src="../img/sitetoolbar__logo_small_en.svg" width="70" alt role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_small sitetoolbar__logo_dark" src="../img/sitetoolbar__logo_small_en-white.svg" width="70" alt role="presentation"><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="../ebook/index.html"><span class="buy-book-button__extra-text">购买</span>EPUB/PDF</a></div><div class="sitetoolbar__theme-switcher"><div class="theme-changer"><label class="theme-changer__label" for="theme-changer-input" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span></label></div></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><button class="sitetoolbar__search-toggle" type="button"></button><form class="sitetoolbar__search" method="GET" action="/search"><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="在 Javascript.info 网站中搜索" required="required" type="text"></div><button class="sitetoolbar__find" type="submit">搜索</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="在教程中搜索" required="required"><button class="tablet-menu-search__button" type="submit" name="type" value="articles">搜索</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map"><span class="map__text">教程路线图</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="theme-changer theme-changer_tablet-menu theme-changer_has-label"><label class="theme-changer__label" for="theme-changer-input-tablet" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input-tablet" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span><span class="theme-changer__label-text theme-changer__label-text_light-theme">Light theme</span><span class="theme-changer__label-text theme-changer__label-text_dark-theme">Dark theme</span></label></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">分享</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fsize-and-scroll" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fsize-and-scroll" rel="nofollow"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://ar.javascript.info/size-and-scroll">عربي</option><option value="https://javascript.info/size-and-scroll">English</option><option value="https://es.javascript.info/size-and-scroll">Español</option><option value="https://fr.javascript.info/size-and-scroll">Français</option><option value="https://id.javascript.info/">Indonesia</option><option value="https://it.javascript.info/size-and-scroll">Italiano</option><option value="https://ja.javascript.info/size-and-scroll">日本語</option><option value="https://ko.javascript.info/size-and-scroll">한국어</option><option value="https://learn.javascript.ru/size-and-scroll">Русский</option><option value="https://tr.javascript.info/size-and-scroll">Türkçe</option><option value="https://uk.javascript.info/">Українська</option><option value="https://zh.javascript.info/size-and-scroll" selected>简体中文</option></select></div></div></div><progress class="tutorial-progress" data-sticky value="9" max="32" data-tooltip="第 9/32 节"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");let e=document.querySelector(".page-wrapper");e&&e.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")});</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><div class="main__header-group"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home"><a class="breadcrumbs__link" href="../index.html"><span class="breadcrumbs__hidden-text">教程</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1"><a class="breadcrumbs__link" href="../ui/index.html"><span>浏览器：文档，事件，接口</span></a></li><li class="breadcrumbs__item" id="breadcrumb-2"><a class="breadcrumbs__link" href="../document/index.html"><span>Document</span></a></li><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"教程","item":"https://zh.javascript.info/"},{"@type":"ListItem","position":2,"name":"浏览器：文档，事件，接口","item":"https://zh.javascript.info/ui"},{"@type":"ListItem","position":3,"name":"Document","item":"https://zh.javascript.info/document"}]}</script></ol><div class="updated-at" data-tooltip="最后修改在 15日 十二月 2021"><div class="updated-at__content">15日 十二月 2021</div></div></div><h1 class="main__header-title">元素大小和滚动</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="元素大小和滚动"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>JavaScript 中有许多属性可让我们读取有关元素宽度、高度和其他几何特征的信息。</p>
<p>我们在 JavaScript 中移动或定位元素时，我们会经常需要它们。</p>
<h2><a class="main__anchor" name="shi-li-yuan-su" href="#shi-li-yuan-su">示例元素</a></h2><p>作为演示属性的示例元素，我们将使用下面给出的元素：</p>
<div id="o334imy5be" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;div id=&quot;example&quot;&gt;
  ...Text...
&lt;/div&gt;
&lt;style&gt;
  #example {
    width: 300px;
    height: 200px;
    border: 25px solid #E8C48F;
    padding: 20px;
    overflow: auto;
  }
&lt;/style&gt;</code></pre>
        </div>
      </div>
      
      </div><p>它有边框（border），内边距（padding）和滚动（scrolling）等全套功能。但没有外边距（margin），因为它们不是元素本身的一部分，并且它们没什么特殊的属性。</p>
<p>这个元素看起来就像这样：</p>
<figure><div class="image" style="width:566px">
      <div class="image__ratio" style="padding-top:82.86219081272085%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-css.svg" width="566" height="469" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-css.svg" alt width="566" height="469">
      </object>
      </div></figure><p>你可以 <a href="https://plnkr.co/edit/8KKf5CzdJmoQYVIa?p=preview">在 sandbox 中打开这个文档</a>。</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">注意滚动条</span></div>
            <div class="important__content"><p>上图演示了元素具有滚动条这种最复杂的情况。一些浏览器（并非全部）通过从内容（上面标记为 “content width”）中获取空间来为滚动条保留空间。</p>
<p>因此，如果没有滚动条，内容宽度将是 <code>300 px</code>，但是如果滚动条宽度是 <code>16px</code>（不同的设备和浏览器，滚动条的宽度可能有所不同），那么还剩下 <code>300 - 16 ＝ 284px</code>，我们应该考虑到这一点。这就是为什么本章的例子总是假设有滚动条。如果没有滚动条，一些计算会更简单。</p>
</div></div>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">文本可能会溢出到 <code>padding-bottom</code> 中</span></div>
            <div class="important__content"><p>在我们的插图中的 padding 中通常显示为空，但是如果元素中有很多文本，并且溢出了，那么浏览器会在 <code>padding-bottom</code> 处显示“溢出”文本，这是正常现象。</p>
</div></div>
<h2><a class="main__anchor" name="ji-he" href="#ji-he">几何</a></h2><p>这是带有几何属性的整体图片：</p>
<figure><div class="image" style="width:670px">
      <div class="image__ratio" style="padding-top:89.8507462686567%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-all.svg" width="670" height="602" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-all.svg" alt width="670" height="602">
      </object>
      </div></figure><p>这些属性的值在技术上讲是数字，但这些数字其实是“像素（pixel）”，因此它们是像素测量值。</p>
<p>让我们从元素外部开始探索属性。</p>
<h2><a class="main__anchor" name="offsetparentoffsetlefttop" href="#offsetparentoffsetlefttop">offsetParent，offsetLeft/Top</a></h2><p>这些属性很少使用，但它们仍然是“最外面”的几何属性，所以我们将从它们开始。</p>
<p><code>offsetParent</code> 是最接近的祖先（ancestor），在浏览器渲染期间，它被用于计算坐标。</p>
<p>最近的祖先为下列之一：</p>
<ol>
<li>CSS 定位的（<code>position</code> 为 <code>absolute</code>，<code>relative</code> 或 <code>fixed</code>），</li>
<li>或 <code>&lt;td&gt;</code>，<code>&lt;th&gt;</code>，<code>&lt;table&gt;</code>，</li>
<li>或 <code>&lt;body&gt;</code>。</li>
</ol>
<p>属性 <code>offsetLeft/offsetTop</code> 提供相对于 <code>offsetParent</code> 左上角的 x/y 坐标。</p>
<p>在下面这个例子中，内部的 <code>&lt;div&gt;</code> 有 <code>&lt;main&gt;</code> 作为 <code>offsetParent</code>，并且 <code>offsetLeft/offsetTop</code> 让它从左上角位移（<code>180</code>）：</p>
<div id="7cra1r9qi5" data-trusted="1" class="code-example" data-demo-height="10">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="展示" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="在沙箱中打开" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;main style=&quot;position: relative&quot; id=&quot;main&quot;&gt;
  &lt;article&gt;
    &lt;div id=&quot;example&quot; style=&quot;position: absolute; left: 180px; top: 180px&quot;&gt;...&lt;/div&gt;
  &lt;/article&gt;
&lt;/main&gt;
&lt;script&gt;
  alert(example.offsetParent.id); // main
  alert(example.offsetLeft); // 180（注意：这是一个数字，不是字符串 &quot;180px&quot;）
  alert(example.offsetTop); // 180
&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><figure><div class="image" style="width:597px">
      <div class="image__ratio" style="padding-top:87.10217755443887%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-offset-parent.svg" width="597" height="520" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-offset-parent.svg" alt width="597" height="520">
      </object>
      </div></figure><p>有以下几种情况下，<code>offsetParent</code> 的值为 <code>null</code>：</p>
<ol>
<li>对于未显示的元素（<code>display:none</code> 或者不在文档中）。</li>
<li>对于 <code>&lt;body&gt;</code> 与 <code>&lt;html&gt;</code>。</li>
<li>对于带有 <code>position:fixed</code> 的元素。</li>
</ol>
<h2><a class="main__anchor" name="offsetwidthheight" href="#offsetwidthheight">offsetWidth/Height</a></h2><p>现在，让我们继续关注元素本身。</p>
<p>这两个属性是最简单的。它们提供了元素的“外部” width/height。或者，换句话说，它的完整大小（包括边框）。</p>
<figure><div class="image" style="width:508px">
      <div class="image__ratio" style="padding-top:100.19685039370079%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-offset-width-height.svg" width="508" height="509" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-offset-width-height.svg" alt width="508" height="509">
      </object>
      </div></figure><p>对于我们的示例元素：</p>
<ul>
<li><code>offsetWidth = 390</code> — 外部宽度（width），可以计算为内部 CSS-width（<code>300px</code>）加上 padding（<code>2 * 20px</code>）和 border（<code>2 * 25px</code>）。</li>
<li><code>offsetHeight = 290</code> — 外部高度（height）。</li>
</ul>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">对于未显示的元素，几何属性为 0/null</span></div>
            <div class="important__content"><p>仅针对显示的元素计算几何属性。</p>
<p>如果一个元素（或其任何祖先）具有 <code>display:none</code> 或不在文档中，则所有几何属性均为零（或 <code>offsetParent</code> 为 <code>null</code>）。</p>
<p>例如，当我们创建了一个元素，但尚未将其插入文档中，或者它（或它的祖先）具有 <code>display:none</code> 时，<code>offsetParent</code> 为 <code>null</code>，并且 <code>offsetWidth</code> 和 <code>offsetHeight</code> 为 <code>0</code>。</p>
<p>我们可以用它来检查一个元素是否被隐藏，像这样：</p>
<div id="xzh8ohp6cx" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>function isHidden(elem) {
  return !elem.offsetWidth &amp;&amp; !elem.offsetHeight;
}</code></pre>
        </div>
      </div>
      
      </div><p>请注意，对于屏幕上显示，但大小为零的元素（例如空的 <code>&lt;div&gt;</code>），它们的 <code>isHidden</code> 返回 <code>true</code>。</p>
</div></div>
<h2><a class="main__anchor" name="clienttopleft" href="#clienttopleft">clientTop/Left</a></h2><p>在元素内部，我们有边框（border）。</p>
<p>为了测量它们，可以使用 <code>clientTop</code> 和 <code>clientLeft</code>。</p>
<p>在我们的例子中：</p>
<ul>
<li><code>clientLeft = 25</code> — 左边框宽度</li>
<li><code>clientTop = 25</code> — 上边框宽度</li>
</ul>
<figure><div class="image" style="width:353px">
      <div class="image__ratio" style="padding-top:89.51841359773371%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-client-left-top.svg" width="353" height="316" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-client-left-top.svg" alt width="353" height="316">
      </object>
      </div></figure><p>……但准确地说 — 这些属性不是边框的 width/height，而是内侧与外侧的相对坐标。</p>
<p>有什么区别？</p>
<p>当文档从右到左显示（操作系统为阿拉伯语或希伯来语）时，影响就显现出来了。此时滚动条不在右边，而是在左边，此时 <code>clientLeft</code> 则包含了滚动条的宽度。</p>
<p>在这种情况下，<code>clientLeft</code> 的值将不是 <code>25</code>，而是加上滚动条的宽度 <code>25 + 16 = 41</code>。</p>
<p>这是希伯来语的例子：</p>
<figure><div class="image" style="width:359px">
      <div class="image__ratio" style="padding-top:88.02228412256268%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-client-left-top-rtl.svg" width="359" height="316" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-client-left-top-rtl.svg" alt width="359" height="316">
      </object>
      </div></figure><h2><a class="main__anchor" name="clientwidthheight" href="#clientwidthheight">clientWidth/Height</a></h2><p>这些属性提供了元素边框内区域的大小。</p>
<p>它们包括了 “content width” 和 “padding”，但不包括滚动条宽度（scrollbar）：</p>
<figure><div class="image" style="width:500px">
      <div class="image__ratio" style="padding-top:98.6%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-client-width-height.svg" width="500" height="493" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-client-width-height.svg" alt width="500" height="493">
      </object>
      </div></figure><p>在上图中，我们首先考虑 <code>clientHeight</code>。</p>
<p>这里没有水平滚动条，所以它恰好是 border 内的总和：CSS-width <code>200px</code> 加上顶部和底部的 padding（<code>2 * 20px</code>），总计 <code>240px</code>。</p>
<p>现在 <code>clientWidth</code> — 这里的 “content width” 不是 <code>300px</code>，而是 <code>284px</code>，因为被滚动条占用了 <code>16px</code>。所以加起来就是 <code>284px</code> 加上左侧和右侧的 padding，总计 <code>324px</code>。</p>
<p><strong>如果这里没有 padding，那么 <code>clientWidth/Height</code> 代表的就是内容区域，即 border 和 scrollbar（如果有）内的区域。</strong></p>
<figure><div class="image" style="width:409px">
      <div class="image__ratio" style="padding-top:114.18092909535453%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-client-width-nopadding.svg" width="409" height="467" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-client-width-nopadding.svg" alt width="409" height="467">
      </object>
      </div></figure><p>因此，当没有 padding 时，我们可以使用 <code>clientWidth/clientHeight</code> 来获取内容区域的大小。</p>
<h2><a class="main__anchor" name="scrollwidthheight" href="#scrollwidthheight">scrollWidth/Height</a></h2><p>这些属性就像 <code>clientWidth/clientHeight</code>，但它们还包括滚动出（隐藏）的部分：</p>
<figure><div class="image" style="width:463px">
      <div class="image__ratio" style="padding-top:113.17494600431965%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-scroll-width-height.svg" width="463" height="524" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-scroll-width-height.svg" alt width="463" height="524">
      </object>
      </div></figure><p>在上图中：</p>
<ul>
<li><code>scrollHeight = 723</code> — 是内容区域的完整内部高度，包括滚动出的部分。</li>
<li><code>scrollWidth = 324</code> — 是完整的内部宽度，这里我们没有水平滚动，因此它等于 <code>clientWidth</code>。</li>
</ul>
<p>我们可以使用这些属性将元素展开（expand）到整个 width/height。</p>
<p>像这样：</p>
<div id="8eeyujl7s9" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// 将元素展开（expand）到完整的内容高度
element.style.height = `${element.scrollHeight}px`;</code></pre>
        </div>
      </div>
      
      </div><p>点击按钮展开元素：</p>
<div id="element" style="width:300px;height:200px; padding: 0;overflow: auto; border:1px solid black;">text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text</div>
<p><button style="padding:0" onclick="element.style.height = `${element.scrollHeight}px`">element.style.height = <code>${element.scrollHeight}px</code></button></p>
<h2><a class="main__anchor" name="scrollleftscrolltop" href="#scrollleftscrolltop">scrollLeft/scrollTop</a></h2><p>属性 <code>scrollLeft/scrollTop</code> 是元素的隐藏、滚动部分的 width/height。</p>
<p>在下图中，我们可以看到带有垂直滚动块的 <code>scrollHeight</code> 和 <code>scrollTop</code>。</p>
<figure><div class="image" style="width:489px">
      <div class="image__ratio" style="padding-top:110.83844580777095%"></div>
      <object type="image/svg+xml" data="../article/size-and-scroll/metric-scroll-top.svg" width="489" height="542" class="image__image" data-use-theme>
        <img src="../article/size-and-scroll/metric-scroll-top.svg" alt width="489" height="542">
      </object>
      </div></figure><p>换句话说，<code>scrollTop</code> 就是“已经滚动了多少”。</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type"><code>scrollLeft/scrollTop</code> 是可修改的</span></div>
            <div class="important__content"><p>大多数几何属性是只读的，但是 <code>scrollLeft/scrollTop</code> 是可修改的，并且浏览器会滚动该元素。</p>
<p>如果你点击下面的元素，则会执行代码 <code>elem.scrollTop += 10</code>。这使得元素内容向下滚动 <code>10px</code>。</p>
<div onclick="this.scrollTop+=10" style="cursor:pointer;border:1px solid black;width:100px;height:80px;overflow:auto">Click<br>Me<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9</div>
<p>将 <code>scrollTop</code> 设置为 <code>0</code> 或一个大的值，例如 <code>1e9</code>，将会使元素滚动到顶部/底部。</p>
</div></div>
<h2><a class="main__anchor" name="bu-yao-cong-css-zhong-huo-qu-widthheight" href="#bu-yao-cong-css-zhong-huo-qu-widthheight">不要从 CSS 中获取 width/height</a></h2><p>我们刚刚介绍了 DOM 元素的几何属性，它们可用于获得宽度、高度和计算距离。</p>
<p>但是，正如我们在 <a href="../styles-and-classes/index.html">样式和类</a> 一章所知道的那样，我们可以使用 <code>getComputedStyle</code> 来读取 CSS-width 和 height。</p>
<p>那为什么不像这样用 <code>getComputedStyle</code> 读取元素的 width 呢？</p>
<div id="a3hk8bsbpi" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="运行" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="在沙箱中打开" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let elem = document.body;

alert( getComputedStyle(elem).width ); // 显示 elem 的 CSS width</code></pre>
        </div>
      </div>
      
      </div><p>为什么我们应该使用几何属性呢？这里有两个原因：</p>
<ol>
<li>
<p>首先，CSS <code>width/height</code> 取决于另一个属性：<code>box-sizing</code>，它定义了“什么是” CSS 宽度和高度。出于 CSS 的目的而对 <code>box-sizing</code> 进行的更改可能会破坏此类 JavaScript 操作。</p>
</li>
<li>
<p>其次，CSS 的 <code>width/height</code> 可能是 <code>auto</code>，例如内联（inline）元素：</p>
<div id="iiyubq39iv" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:3,&quot;end&quot;:3}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="展示" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="在沙箱中打开" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;span id=&quot;elem&quot;&gt;Hello!&lt;/span&gt;

&lt;script&gt;
  alert( getComputedStyle(elem).width ); // auto
&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><p>从 CSS 的观点来看，<code>width:auto</code> 是完全正常的，但在 JavaScript 中，我们需要一个确切的 <code>px</code> 大小，以便我们在计算中使用它。因此，这里的 CSS 宽度没什么用。</p>
</li>
</ol>
<p>还有另一个原因：滚动条。有时，在没有滚动条的情况下代码工作正常，当出现滚动条时，代码就出现了 bug，因为在某些浏览器中，滚动条会占用内容的空间。因此，可用于内容的实际宽度小于 CSS 宽度。而 <code>clientWidth/clientHeight</code> 则会考虑到这一点。</p>
<p>……但是，使用 <code>getComputedStyle(elem).width</code> 时，情况就不同了。某些浏览器（例如 Chrome）返回的是实际内部宽度减去滚动条宽度，而某些浏览器（例如 Firefox）返回的是 CSS 宽度（忽略了滚动条）。这种跨浏览器的差异是不使用 <code>getComputedStyle</code> 而依靠几何属性的原因。</p>
<p>如果你的浏览器保留了滚动条的空间（大多数 Windows 中的浏览器），那么你可以在下面测试它。</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"><div class="toolbar__tool">
        <a href="https://zh.js.cx/article/size-and-scroll/cssWidthScroll/" target="_blank" title="在新窗口中打开" class="toolbar__button toolbar__button_external"></a>
      </div>
      </div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:300px" src="https://zh.js.cx/article/size-and-scroll/cssWidthScroll/"></iframe>
  </div><p>带有文本的元素具有 <code>width:300px</code>。</p>
<p>在桌面 Windows 操作系统上，Firefox、Chrome、Edge 都为滚动条保留了空间。但 Firefox 显示的是 <code>300px</code>，而 Chrome 和 Edge 显示较少。这是因为 Firefox 返回 CSS 宽度，其他浏览器返回“真实”宽度。</p>
<p>请注意，所描述的差异只是关于从 JavaScript 读取的 <code>getComputedStyle(...).width</code>，而视觉上看，一切都是正确的。</p>
<h2><a class="main__anchor" name="zong-jie" href="#zong-jie">总结</a></h2><p>元素具有以下几何属性：</p>
<ul>
<li><code>offsetParent</code> — 是最接近的 CSS 定位的祖先，或者是 <code>td</code>，<code>th</code>，<code>table</code>，<code>body</code>。</li>
<li><code>offsetLeft/offsetTop</code> — 是相对于 <code>offsetParent</code> 的左上角边缘的坐标。</li>
<li><code>offsetWidth/offsetHeight</code> — 元素的“外部” width/height，边框（border）尺寸计算在内。</li>
<li><code>clientLeft/clientTop</code> — 从元素左上角外角到左上角内角的距离。对于从左到右显示内容的操作系统来说，它们始终是左侧/顶部 border 的宽度。而对于从右到左显示内容的操作系统来说，垂直滚动条在左边，所以 <code>clientLeft</code> 也包括滚动条的宽度。</li>
<li><code>clientWidth/clientHeight</code> — 内容的 width/height，包括 padding，但不包括滚动条（scrollbar）。</li>
<li><code>scrollWidth/scrollHeight</code> — 内容的 width/height，就像 <code>clientWidth/clientHeight</code> 一样，但还包括元素的滚动出的不可见的部分。</li>
<li><code>scrollLeft/scrollTop</code> — 从元素的左上角开始，滚动出元素的上半部分的 width/height。</li>
</ul>
<p>除了 <code>scrollLeft/scrollTop</code> 外，所有属性都是只读的。如果我们修改 <code>scrollLeft/scrollTop</code>，浏览器会滚动对应的元素。</p>
</div></article><div class="tasks formatted"><h2 class="tasks__title" id="tasks"><a class="tasks__title-anchor main__anchor main__anchor main__anchor_noicon" href="#tasks">任务</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#xiang-dui-yu-di-bu-gun-dong-le-duo-shao" name="xiang-dui-yu-di-bu-gun-dong-le-duo-shao">相对于底部滚动了多少？</a></h3><a class="task__open-link" href="../task/get-scroll-height-bottom/index.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="任务的重要程度有多高，等级从 1 到 5。">重要程度: 5</span></div><div class="task__content"><div class="task__formatted"><p><code>elem.scrollTop</code> 属性是从顶部滚动出来的部分的大小。如何获得底部滚动的大小（我们称其为 <code>scrollBottom</code>）？</p>
<p>编写适用于任意 <code>elem</code> 的代码。</p>
<p>P.S. 请检查你的代码：如果没有滚动，或元素底部已经完全滚动完成，那么它应该返回 <code>0</code>。</p>
</div><button class="task__solution" type="button">解决方案</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p>解决方案：</p>
<div id="iglfihfsue" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let scrollBottom = elem.scrollHeight - elem.scrollTop - elem.clientHeight;</code></pre>
        </div>
      </div>
      
      </div><p>换句话说：（完全高度）减去（已滚出顶部的高度）减去（可见部分的高度）— 得到的结果就是滚动出来的底部的部分。</p>
</div></div><button class="close-button task__answer-close" type="button" title="关闭"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#gun-dong-tiao-de-kuan-du-shi-duo-shao" name="gun-dong-tiao-de-kuan-du-shi-duo-shao">滚动条的宽度是多少？</a></h3><a class="task__open-link" href="../task/scrollbar-width/index.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="任务的重要程度有多高，等级从 1 到 5。">重要程度: 3</span></div><div class="task__content"><div class="task__formatted"><p>编写代码，返回标准滚动条宽度。</p>
<p>对于 Windows，它通常在 <code>12px</code> 和 <code>20px</code> 之间变化。如果浏览器没有为其保留任何空间（滚动条以半透明的形式处于文本上面，也是可能发生的），那么它可能是 <code>0px</code>。</p>
<p>P.S. 该代码应适用于任何 HTML 文档，而不依赖于其内容。</p>
</div><button class="task__solution" type="button">解决方案</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p>为了获得滚动条的宽度，我们可以创建一个带有滚动条的元素，但是没有边框（border）和内边距（padding）。</p>
<p>然后，它的全宽度 <code>offsetWidth</code> 和内部内容宽度 <code>clientWidth</code> 之间的差值就是滚动条的宽度：</p>
<div id="lrf9vgpo31" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="运行" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="在沙箱中打开" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// 创建一个包含滚动条的 div
let div = document.createElement('div');

div.style.overflowY = 'scroll';
div.style.width = '50px';
div.style.height = '50px';

// 必须将其放入文档（document）中，否则其大小将为 0
document.body.append(div);
let scrollWidth = div.offsetWidth - div.clientWidth;

div.remove();

alert(scrollWidth);</code></pre>
        </div>
      </div>
      
      </div></div></div><button class="close-button task__answer-close" type="button" title="关闭"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#jiang-xiao-qiu-zhi-yu-qu-yu-field-zhong-xin" name="jiang-xiao-qiu-zhi-yu-qu-yu-field-zhong-xin">将小球置于区域（field）中心</a></h3><a class="task__open-link" href="../task/put-ball-in-center/index.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="任务的重要程度有多高，等级从 1 到 5。">重要程度: 5</span></div><div class="task__content"><div class="task__formatted"><p>源文件的效果如下：</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"><div class="toolbar__tool">
        <a href="https://zh.js.cx/task/put-ball-in-center/source/" target="_blank" title="在新窗口中打开" class="toolbar__button toolbar__button_external"></a>
      </div>
      <div class="toolbar__tool">
        <a href="https://plnkr.co/edit/lgpj1phFreJMWtjd?p=preview" target="_blank" title="在沙箱中打开" data-plunk-id="lgpj1phFreJMWtjd" class="toolbar__button toolbar__button_edit"></a>
      </div>
      </div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:180px" src="https://zh.js.cx/task/put-ball-in-center/source/"></iframe>
  </div><p>区域（field）的中心坐标是多少？</p>
<p>计算它们，并将小球置于绿色的区域（field）中心：</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"></div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:180px" src="https://zh.js.cx/task/put-ball-in-center/solution/"></iframe>
  </div><ul>
<li>该元素应该通过 JavaScript 移动，而不是 CSS。</li>
<li>该代码应该适用于任何大小的球（<code>10</code>、<code>20</code>、<code>30</code> 像素）以及任意大小的区域（field），而不应该绑定到给定值。</li>
</ul>
<p>P.S. 当然了，置于中心的操作通过 CSS 也可以完成，但是这里我们需要通过 JavaScript 完成。此外，当必须使用 JavaScript 时，我们可能会遇到其他话题以及更加复杂的情况，这里我们只是做一个“热身”。</p>
<p><a href="https://plnkr.co/edit/lgpj1phFreJMWtjd?p=preview" target="_blank" data-plunk-id="lgpj1phFreJMWtjd">打开一个任务沙箱。</a></p></div><button class="task__solution" type="button">解决方案</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p>球具有 <code>position:absolute</code>。这意味着它的 <code>left/top</code> 坐标是从最近的具有定位属性的元素开始测量的，这个元素即 <code>#field</code>（因为它有 <code>position:relative</code>）。</p>
<p>坐标从场（field）的左上角内侧开始：</p>
<figure><div class="image" style="width:233px">
      <div class="image__ratio" style="padding-top:66.95278969957081%"></div>
      <object type="image/svg+xml" data="../task/put-ball-in-center/field.svg" width="233" height="156" class="image__image" data-use-theme>
        <img src="../task/put-ball-in-center/field.svg" alt width="233" height="156">
      </object>
      </div></figure><p>内部的场（field）的 width/height 是 <code>clientWidth/clientHeight</code>。所以场（field）的中心坐标为 <code>(clientWidth/2, clientHeight/2)</code>。</p>
<p>……但是，如果我们将 <code>ball.style.left/top</code> 设置为这种值，那么在中心的会是球的左上边缘，而不是整个球：</p>
<div id="la7d3eju9n" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>ball.style.left = Math.round(field.clientWidth / 2) + 'px';
ball.style.top = Math.round(field.clientHeight / 2) + 'px';</code></pre>
        </div>
      </div>
      
      </div><p>这是它将显示出来的效果：</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"></div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:180px" src="https://zh.js.cx/task/put-ball-in-center/ball-half/"></iframe>
  </div><p>为了使球的中心与场（field）的中心重合，我们应该把球向左移动球宽度的一半，并向上移动球高度的一半：</p>
<div id="wf3bjzyixt" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>ball.style.left = Math.round(field.clientWidth / 2 - ball.offsetWidth / 2) + 'px';
ball.style.top = Math.round(field.clientHeight / 2 - ball.offsetHeight / 2) + 'px';</code></pre>
        </div>
      </div>
      
      </div><p>现在，球终于居中了。</p>
<div class="important important_warn">
            <div class="important__header"><span class="important__type">注意：陷阱！</span></div>
            <div class="important__content"><p>当 <code>&lt;img&gt;</code> 没有 width/height 时，代码将无法可靠地工作：</p>
<div id="x7zgj11ko2" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;img src=&quot;ball.png&quot; id=&quot;ball&quot;&gt;</code></pre>
        </div>
      </div>
      
      </div></div></div>
<p>当浏览器不知道图片的 width/height（通过标签 attribute 或 CSS）时，它会假定它们等于 <code>0</code>，直到图片加载完成。</p>
<p>因此，在图片加载完成之前，<code>ball.offsetWidth</code> 的值为 <code>0</code>。这会导致上面的代码中会有错误的坐标。</p>
<p>在第一次加载完成后，浏览器通常会缓存该图片，并在下一次加载时，浏览器会立即拥有该图片的大小。但是在第一次加载时，<code>ball.offsetWidth</code> 的值为 <code>0</code>。</p>
<p>我们应该通过在 <code>&lt;img&gt;</code> 中添加 <code>width/height</code> 来解决这个问题：</p>
<div id="am068lasrx" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:0,&quot;cols&quot;:[{&quot;start&quot;:20,&quot;end&quot;:42}]}]">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;img src=&quot;ball.png&quot; width=&quot;40&quot; height=&quot;40&quot; id=&quot;ball&quot;&gt;</code></pre>
        </div>
      </div>
      
      </div><p>……或者在 CSS 中提供大小：</p>
<div id="qvp2j0s8aa" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-css"><code>#ball {
  width: 40px;
  height: 40px;
}</code></pre>
        </div>
      </div>
      
      </div><p><a href="https://plnkr.co/edit/qkfEjKc5UuY7z3ug?p=preview" target="_blank" data-plunk-id="qkfEjKc5UuY7z3ug">使用沙箱打开解决方案。</a></p></div></div><button class="close-button task__answer-close" type="button" title="关闭"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#csswidth-yu-clientwidth-de-bu-tong-dian" name="csswidth-yu-clientwidth-de-bu-tong-dian">CSS width 与 clientWidth 的不同点</a></h3><a class="task__open-link" href="../task/width-vs-clientwidth/index.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="任务的重要程度有多高，等级从 1 到 5。">重要程度: 5</span></div><div class="task__content"><div class="task__formatted"><p><code>getComputedStyle(elem).width</code> 与 <code>elem.clientWidth</code> 之间有什么不同点？</p>
<p>指出至少三种不同点。当然越多越好。</p>
</div><button class="task__solution" type="button">解决方案</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p>不同点：</p>
<ol>
<li><code>clientWidth</code> 值是数值，而 <code>getComputedStyle(elem).width</code> 返回一个以 <code>px</code> 作为后缀的字符串。</li>
<li><code>getComputedStyle</code> 可能会返回非数值的 width，例如内联（inline）元素的 <code>&quot;auto&quot;</code>。</li>
<li><code>clientWidth</code> 是元素的内部内容区域加上 padding，而 CSS width（具有标准的 <code>box-sizing</code>）是内部内容区域，<strong>不包括 padding</strong>。</li>
<li>如果有滚动条，并且浏览器为其保留了空间，那么某些浏览器会从 CSS width 中减去该空间（因为它不再可用于内容），而有些则不会这样做。<code>clientWidth</code> 属性总是相同的：如果为滚动条保留了空间，那么将减去滚动条的大小。</li>
</ol>
</div></div><button class="close-button task__answer-close" type="button" title="关闭"></button></div></div></div></div></div></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="../styles-and-classes/index.html" data-tooltip="样式和类"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">上一节</span></a><a class="page__nav page__nav_next" href="../size-and-scroll-window/index.html" data-tooltip="Window 大小和滚动"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">下一节</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">分享</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fsize-and-scroll" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fsize-and-scroll" rel="nofollow"></a></div><div class="article-tablet-foot__map"><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map"><span class="map__text">教程路线图</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">评论</a></h2><div class="comments__read-before"><span class="comments__read-before-link">在评论之前先阅读本内容…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>如果你发现教程有错误，或者有其他需要修改和提升的地方 — 请 <a href="https://github.com/javascript-tutorial/zh.javascript.info/issues">提交一个 GitHub issue</a> 或 pull request，而不是在这评论。</li><li>如果你对教程的内容有不理解的地方 — 请详细说明。</li><li>使用 <code>&lt;code&gt;</code> 标签插入只有几个词的代码，插入多行代码可以使用 <code>&lt;pre&gt;</code> 标签，对于超过 10 行的代码，建议你使用沙箱（<a href="https://plnkr.co/edit/?p=preview">plnkr</a>，<a href="https://jsbin.com">JSBin</a>，<a href="http://codepen.io">codepen</a>…）</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/zh.javascript.info\/size-and-scroll","identifier":"\/size-and-scroll"}); };</script><script>var disqus_shortname = "zh-javascript-info";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="../tutorial/map/index.html" data-action="tutorial-map" data-tooltip="教程路线图"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">章节</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="../document/index.html">Document</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">课程导航</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#shi-li-yuan-su">示例元素</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#ji-he">几何</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#offsetparentoffsetlefttop">offsetParent，offsetLeft/Top</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#offsetwidthheight">offsetWidth/Height</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#clienttopleft">clientTop/Left</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#clientwidthheight">clientWidth/Height</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#scrollwidthheight">scrollWidth/Height</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#scrollleftscrolltop">scrollLeft/scrollTop</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#bu-yao-cong-css-zhong-huo-qu-widthheight">不要从 CSS 中获取 width/height</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#zong-jie">总结</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#tasks">任务 (4)</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">评论</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">分享</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fsize-and-scroll" rel="nofollow"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fzh.javascript.info%2Fsize-and-scroll" rel="nofollow"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/javascript-tutorial/zh.javascript.info/blob/master/2-ui/1-document/09-size-and-scroll" rel="nofollow">在 GitHub 上编辑</a></div></div></div></div></div></div><div class="page-footer"><ul class="page-footer__list"><li class="page-footer__item page-footer__item_copy">©&nbsp;2007—2022&nbsp; Ilya Kantor</li><li class="page-footer__item page-footer__item_about"><a class="page-footer__link" href="../about/index.html">关于本项目</a></li><li class="page-footer__item page-footer__item_contact"><a class="page-footer__link" href="../about/index.html#contact-us">联系我们</a></li></ul></div></body></html>